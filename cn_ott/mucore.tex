% generated by Ott 0.31 from: mucore.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\geometry{landscape}
\renewcommand{\ottkw}[1]{ \texttt{#1} }
\renewcommand{\ottdrule}[4][]{ {\displaystyle\frac{\begin{array}{l}#2\end{array} }{#3}\quad\ottdrulename{#4} }\\[\baselineskip] }

\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{ident} ,\, \ottmv{x} ,\, \ottmv{y} ,\, { y_p } ,\, { y_f } ,\, \ottmv{\_} ,\, \ottmv{abbrev} ,\, \ottmv{r} ,\, { \alpha } $ & \ottcom{subscripts: p for pointers, f for functions} \\
 $ \ottmv{n} ,\, \ottmv{i} ,\, \ottmv{j} $ & \ottcom{index variables} \\
 $ \ottmv{impl\_const} $ & \ottcom{implementation-defined constant} \\
 $ member $ & \ottcom{C struct/union member name} \\
 $  $ & \ottcom{Ott-hack, ignore (annotations)} \\
 $ nat $ & \ottcom{OCaml arbitrary-width natural number} \\
 $ mem\_ptr $ & \ottcom{abstract pointer value} \\
 $ mem\_val $ & \ottcom{abstract memory value} \\
 $  $ & \ottcom{Ott-hack, ignore (locations)} \\
 $ mem\_iv\_c $ & \ottcom{OCaml type for memory constraints on integer values} \\
 $ \ottmv{UB\_name} $ & \ottcom{undefined behaviour} \\
 $ string $ & \ottcom{OCaml string} \\
 $  $ & \ottcom{Ott-hack, ignore (OCaml type variable TY)} \\
 $  $ & \ottcom{Ott-hack, ignore (OCaml Symbol.prefix)} \\
 $ mem\_order ,\, \_ $ & \ottcom{OCaml type for memory order} \\
 $ linux\_mem\_order $ & \ottcom{OCaml type for Linux memory order} \\
 $  $ & \ottcom{Ott-hack, ignore (OCaml type variable bt)} \\
}}

\newcommand{\ottSctypesXXt}{
\ottrulehead{\ottnt{Sctypes\_t}  ,\ \tau}{::=}{\ottcom{C type}}\ottprodnewline
\ottfirstprodline{|}{\tau  *}{}{}{}{\ottcom{pointer to type $\tau$}}}

\newcommand{\otttyXXtag}{
\ottrulehead{tag}{::=}{\ottcom{OCaml type for struct/union tag}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{ident}}{}{}{}{}}

\newcommand{\ottbaseXXtype}{
\ottrulehead{\beta  ,\ \_}{::=}{\ottcom{base types}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{unit}}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\ottkw{bool}}{}{}{}{\ottcom{boolean}}\ottprodnewline
\ottprodline{|}{\ottkw{integer}}{}{}{}{\ottcom{integer}}\ottprodnewline
\ottprodline{|}{\ottkw{real}}{}{}{}{\ottcom{rational numbers?}}\ottprodnewline
\ottprodline{|}{\ottkw{loc}}{}{}{}{\ottcom{location}}\ottprodnewline
\ottprodline{|}{\ottkw{array} \, \beta}{}{}{}{\ottcom{array}}\ottprodnewline
\ottprodline{|}{\ottkw{list} \, \beta}{}{}{}{\ottcom{list}}\ottprodnewline
\ottprodline{|}{\ottcomp{\beta_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{\ottcom{tuple}}\ottprodnewline
\ottprodline{|}{\ottkw{struct} \, tag}{}{}{}{\ottcom{struct}}\ottprodnewline
\ottprodline{|}{\ottkw{set} \, \beta}{}{}{}{\ottcom{set}}\ottprodnewline
\ottprodline{|}{\ottkw{opt} \, \ottsym{(}  \beta  \ottsym{)}}{}{}{}{\ottcom{option}}\ottprodnewline
\ottprodline{|}{\beta  \rightarrow  \beta'}{}{}{}{\ottcom{parameter types}}\ottprodnewline
\ottprodline{|}{ \beta_{  \tau  } } {\textsf{M}}{}{}{\ottcom{of a C type}}}

\newcommand{\ottbinop}{
\ottrulehead{\mathbin{ binop }}{::=}{\ottcom{binary operators}}\ottprodnewline
\ottfirstprodline{|}{ \mathbin{ \texttt{+} } }{}{}{}{\ottcom{addition}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{-} } }{}{}{}{\ottcom{subtraction}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{*} } }{}{}{}{\ottcom{multiplication}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{/} } }{}{}{}{\ottcom{division}}\ottprodnewline
\ottprodline{|}{ \mathbin{  \ottkw{rem\_t}  } }{}{}{}{\ottcom{modulus}}\ottprodnewline
\ottprodline{|}{ \mathbin{  \ottkw{rem\_f}  } }{}{}{}{\ottcom{remainder}}\ottprodnewline
\ottprodline{|}{\mathbin { \texttt{\char`\^} }}{}{}{}{\ottcom{exponentiation}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{=}  } }{}{}{}{\ottcom{equality, defined both for integer and C types}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{!=} } }{}{}{}{\ottcom{inequality, similiarly defined}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{>}  } }{}{}{}{\ottcom{greater than, similarly defined}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{<}  } }{}{}{}{\ottcom{less than, similarly defined}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{>=} } }{}{}{}{\ottcom{greater than or equal to, similarly defined}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{<=} } }{}{}{}{\ottcom{less than or equal to, similarly defined}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{/\char`\\} } }{}{}{}{\ottcom{conjucntion}}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{\char`\\/} } }{}{}{}{\ottcom{disjunction}}}

\newcommand{\ottarithXXbinop}{
\ottrulehead{\mathbin{ binop_{arith} }}{::=}{\ottcom{arithmentic binary operators}}\ottprodnewline
\ottfirstprodline{|}{ \mathbin{ \texttt{+} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{-} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{*} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{/} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{  \ottkw{rem\_t}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{  \ottkw{rem\_f}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbin { \texttt{\char`\^} }}{}{}{}{}}

\newcommand{\ottrelXXbinop}{
\ottrulehead{\mathbin{ binop_{rel} }}{::=}{\ottcom{relational binary operators}}\ottprodnewline
\ottfirstprodline{|}{ \mathbin{ \texttt{=}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{!=} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{>}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{<}  } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{>=} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{<=} } }{}{}{}{}}

\newcommand{\ottboolXXbinop}{
\ottrulehead{\mathbin{ binop_{bool} }}{::=}{\ottcom{boolean binary operators}}\ottprodnewline
\ottfirstprodline{|}{ \mathbin{ \texttt{/\char`\\} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbin{ \texttt{\char`\\/} } }{}{}{}{}}

\newcommand{\otttyXXmemXXint}{
\ottrulehead{mem\_int}{::=}{\ottcom{memory integer value}}\ottprodnewline
\ottfirstprodline{|}{ 1 } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ 0 } {\textsf{M}}{}{}{}}

\newcommand{\ottmuXXobjectXXvalue}{
\ottrulehead{object\_value}{::=}{\ottcom{C object values (inhabitants of object types), which can be read/stored}}\ottprodnewline
\ottfirstprodline{|}{mem\_int}{}{}{}{\ottcom{integer value}}\ottprodnewline
\ottprodline{|}{mem\_ptr}{}{}{}{\ottcom{pointer value}}\ottprodnewline
\ottprodline{|}{\ottkw{array} \, \ottsym{(} \, \ottcomp{loaded\_value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{C array value}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottkw{struct} \, ident  \ottsym{)}  \ottsym{\{} \, \ottcomp{. \, member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}  =  mem\_val_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\}}}{}{}{}{\ottcom{C struct value}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottkw{union} \, ident  \ottsym{)}  \ottsym{\{} \, . \, member  =  mem\_val  \ottsym{\}}}{}{}{}{\ottcom{C union value}}}

\newcommand{\ottmuXXloadedXXvalue}{
\ottrulehead{loaded\_value}{::=}{\ottcom{potentially unspecified C object values}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{specified} \, object\_value}{}{}{}{\ottcom{specified loaded value}}}

\newcommand{\ottmuXXvalue}{
\ottrulehead{value}{::=}{\ottcom{Core values}}\ottprodnewline
\ottfirstprodline{|}{object\_value}{}{}{}{\ottcom{C object value}}\ottprodnewline
\ottprodline{|}{loaded\_value}{}{}{}{\ottcom{loaded C object value}}\ottprodnewline
\ottprodline{|}{\ottkw{Unit}}{}{}{}{\ottcom{unit}}\ottprodnewline
\ottprodline{|}{\ottkw{True}}{}{}{}{\ottcom{boolean true}}\ottprodnewline
\ottprodline{|}{\ottkw{False}}{}{}{}{\ottcom{boolean false}}\ottprodnewline
\ottprodline{|}{\beta  \ottsym{[} \, \ottcomp{value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{]}}{}{}{}{\ottcom{list}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottcomp{value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{tuple}}}

\newcommand{\ottmuXXboolXXvalue}{
\ottrulehead{bool\_value}{::=}{\ottcom{Core booleans}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{True}}{}{}{}{\ottcom{boolean true}}\ottprodnewline
\ottprodline{|}{\ottkw{False}}{}{}{}{\ottcom{boolean false}}}

\newcommand{\ottmuXXctorXXval}{
\ottrulehead{ctor\_val}{::=}{\ottcom{data constructors}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Nil} \, \beta}{}{}{}{\ottcom{empty list}}\ottprodnewline
\ottprodline{|}{\ottkw{Cons}}{}{}{}{\ottcom{list cons}}\ottprodnewline
\ottprodline{|}{\ottkw{Tuple}}{}{}{}{\ottcom{tuple}}\ottprodnewline
\ottprodline{|}{\ottkw{Array}}{}{}{}{\ottcom{C array}}\ottprodnewline
\ottprodline{|}{\ottkw{Specified}}{}{}{}{\ottcom{non-unspecified loaded value}}}

\newcommand{\ottmuXXctorXXexpr}{
\ottrulehead{ctor\_expr}{::=}{\ottcom{data constructors}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{Ivmax}}{}{}{}{\ottcom{max integer value}}\ottprodnewline
\ottprodline{|}{\ottkw{Ivmin}}{}{}{}{\ottcom{min integer value}}\ottprodnewline
\ottprodline{|}{\ottkw{Ivsizeof}}{}{}{}{\ottcom{sizeof value}}\ottprodnewline
\ottprodline{|}{\ottkw{Ivalignof}}{}{}{}{\ottcom{alignof value}}\ottprodnewline
\ottprodline{|}{\ottkw{IvCOMPL}}{}{}{}{\ottcom{bitwise complement}}\ottprodnewline
\ottprodline{|}{\ottkw{IvAND}}{}{}{}{\ottcom{bitwise AND}}\ottprodnewline
\ottprodline{|}{\ottkw{IvOR}}{}{}{}{\ottcom{bitwise OR}}\ottprodnewline
\ottprodline{|}{\ottkw{IvXOR}}{}{}{}{\ottcom{bitwise XOR}}\ottprodnewline
\ottprodline{|}{\ottkw{Fvfromint}}{}{}{}{\ottcom{cast integer to floating value}}\ottprodnewline
\ottprodline{|}{\ottkw{Ivfromfloat}}{}{}{}{\ottcom{cast floating to integer value}}}

\newcommand{\ottmuXXname}{
\ottrulehead{name}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ident}{}{}{}{\ottcom{Core identifier}}\ottprodnewline
\ottprodline{|}{\ottmv{impl\_const}}{}{}{}{\ottcom{implementation-defined constant}}}

\newcommand{\ottmuXXpval}{
\ottrulehead{pval}{::=}{\ottcom{pure values}}\ottprodnewline
\ottfirstprodline{|}{ident}{}{}{}{\ottcom{Core identifier}}\ottprodnewline
\ottprodline{|}{\ottmv{impl\_const}}{}{}{}{\ottcom{implementation-defined constant}}\ottprodnewline
\ottprodline{|}{value}{}{}{}{\ottcom{Core values}}\ottprodnewline
\ottprodline{|}{\ottkw{constrained} \, \ottsym{(} \, \ottcomp{mem\_iv\_c_{\ottmv{i}}  \ottsym{,}  pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{constrained value}}\ottprodnewline
\ottprodline{|}{\ottkw{error} \, \ottsym{(}  string  \ottsym{,}  pval  \ottsym{)}}{}{}{}{\ottcom{impl-defined static error}}\ottprodnewline
\ottprodline{|}{ctor\_val  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{data constructor application}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottkw{struct} \, ident  \ottsym{)}  \ottsym{\{} \, \ottcomp{. \, member_{\ottmv{i}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\}}}{}{}{}{\ottcom{C struct expression}}\ottprodnewline
\ottprodline{|}{\ottsym{(} \, \ottkw{union} \, ident  \ottsym{)}  \ottsym{\{} \, . \, member  =  pval  \ottsym{\}}}{}{}{}{\ottcom{C union expression}}}

\newcommand{\ottmuXXtpval}{
\ottrulehead{tpval}{::=}{\ottcom{top-level pure values}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{undef} \,  \, \ottmv{UB\_name}}{}{}{}{\ottcom{undefined behaviour}}\ottprodnewline
\ottprodline{|}{\ottkw{done} \, pval}{}{}{}{\ottcom{pure done}}}

\newcommand{\otttyXXsymXXoptXXTXXbt}{
\ottrulehead{ident\_opt\_\beta}{::=}{\ottcom{type annotated optional identifier}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{\_}  {:}  \beta}{}{\textrm{binders}=\{\}}{}{}\ottprodnewline
\ottprodline{|}{ident  {:}  \beta}{}{\textrm{binders}=ident}{}{}}

\newcommand{\ottmuXXpattern}{
\ottrulehead{pattern}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ident\_opt\_\beta}{}{\textrm{binders}=\textrm{binders}(ident\_opt\_\beta)}{}{}\ottprodnewline
\ottprodline{|}{ctor\_val  \ottsym{(} \, \ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{\textrm{binders}=\textrm{binders}(\ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}})}{}{}}

\newcommand{\ottZXXt}{
\ottrulehead{z}{::=}{\ottcom{OCaml arbitrary-width integer}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{i}} {\textsf{M}}{}{}{\ottcom{literal integer}}\ottprodnewline
\ottprodline{|}{ mem\_int } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathrm{size\_of}(  \tau  ) } {\textsf{M}}{}{}{\ottcom{size of a C type}}\ottprodnewline
\ottprodline{|}{ \mathrm{offset\_of}_{  tag  }(  member  ) } {\textsf{M}}{}{}{\ottcom{offset of a struct member}}\ottprodnewline
\ottprodline{|}{\ottkw{ptr\_size}} {\textsf{M}}{}{}{\ottcom{size of a pointer}}\ottprodnewline
\ottprodline{|}{ \mathrm{max\_int}_{  \tau  } } {\textsf{M}}{}{}{\ottcom{maximum value of int of type $\tau$}}\ottprodnewline
\ottprodline{|}{ \mathrm{min\_int}_{  \tau  } } {\textsf{M}}{}{}{\ottcom{minimum value of int of type $\tau$}}}

\newcommand{\ottrational}{
\ottrulehead{\mathbb{Q}  ,\ \ottnt{q}  ,\ \_}{::=}{\ottcom{OCaml type for rational numbers}}\ottprodnewline
\ottfirstprodline{|}{ \frac{ int_{{\mathrm{1}}} }{ int_{{\mathrm{2}}} } }{}{}{}{}}

\newcommand{\ottlit}{
\ottrulehead{\ottnt{lit}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ident}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{unit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{bool}{}{}{}{}\ottprodnewline
\ottprodline{|}{z}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{Q}}{}{}{}{}}

\newcommand{\ottmuXXsymXXorXXpattern}{
\ottrulehead{ident\_or\_pattern}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ident}{}{\textrm{binders}=ident}{}{}\ottprodnewline
\ottprodline{|}{pattern}{}{\textrm{binders}=\textrm{binders}(pattern)}{}{}}

\newcommand{\ottboolXXop}{
\ottrulehead{\ottnt{bool\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\neg \, term}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  =  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \rightarrow  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\bigwedge  \ottsym{(} \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\bigvee  \ottsym{(} \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ term_{{\mathrm{1}}}   \mathbin{ binop_{bool} }   term_{{\mathrm{2}}} } {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, term_{{\mathrm{1}}} \, \ottkw{then} \, term_{{\mathrm{2}}} \, \ottkw{else} \, term_{{\mathrm{3}}}}{}{}{}{}}

\newcommand{\ottarithXXop}{
\ottrulehead{\ottnt{arith\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{term_{{\mathrm{1}}}  \ottsym{+}  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \ottsym{-}  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \times  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \ottsym{/}  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}} \, \ottkw{rem\_t} \, term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}} \, \ottkw{rem\_f} \, term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \mathbin { \texttt{\char`\^} }  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ term_{{\mathrm{1}}}   \mathbin{ binop_{arith} }   term_{{\mathrm{2}}} } {\textsf{M}}{}{}{}}

\newcommand{\ottcmpXXop}{
\ottrulehead{\ottnt{cmp\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{term_{{\mathrm{1}}}  \ottsym{<}  term_{{\mathrm{2}}}}{}{}{}{\ottcom{less than}}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \leq  term_{{\mathrm{2}}}}{}{}{}{\ottcom{less than or equal}}\ottprodnewline
\ottprodline{|}{ term_{{\mathrm{1}}}   \mathbin{ binop_{rel} }   term_{{\mathrm{2}}} } {\textsf{M}}{}{}{}}

\newcommand{\ottlistXXop}{
\ottrulehead{\ottnt{list\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{nil}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ term_{{\mathrm{1}}}  ::  term_{{\mathrm{2}}} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{tl} \, term}{}{}{}{}\ottprodnewline
\ottprodline{|}{ term ^{( int )} }{}{}{}{}}

\newcommand{\otttupleXXop}{
\ottrulehead{\ottnt{tuple\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(} \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ term ^{( int )} }{}{}{}{}}

\newcommand{\ottpointerXXop}{
\ottrulehead{\ottnt{pointer\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{mem\_ptr}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \mathbin{ {+}_{ \mathrm{ptr} } }  term_{{\mathrm{2}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cast\_int\_to\_ptr} \, term}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cast\_ptr\_to\_int} \, term}{}{}{}{}}

\newcommand{\ottarrayXXop}{
\ottrulehead{\ottnt{array\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  \mid \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\mbox{$\mid$}]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term_{{\mathrm{1}}}  \ottsym{[}  term_{{\mathrm{2}}}  \ottsym{]}}{}{}{}{}}

\newcommand{\ottparamXXop}{
\ottrulehead{\ottnt{param\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ident  {:}  \beta  . \:  term}{}{}{}{}\ottprodnewline
\ottprodline{|}{term  \ottsym{(}  term_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  term_{\ottmv{n}}  \ottsym{)}}{}{}{}{}}

\newcommand{\ottstructXXop}{
\ottrulehead{\ottnt{struct\_op}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ term   .   member }{}{}{}{}}

\newcommand{\ottctXXpred}{
\ottrulehead{\ottnt{ct\_pred}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{representable} \, \ottsym{(}  \tau  \ottsym{,}  term  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{aligned} \, \ottsym{(}  \tau  \ottsym{,}  term  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{alignedI} \, \ottsym{(}  term_{{\mathrm{1}}}  \ottsym{,}  term_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}}

\newcommand{\ottterm}{
\ottrulehead{\ottnt{term}  ,\ \_}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{lit}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arith\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{bool\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{cmp\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{tuple\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{struct\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{pointer\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{list\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{array\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ct\_pred}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{param\_op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{term}  \ottsym{)}} {\textsf{S}}{}{}{\ottcom{parentheses}}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{term}  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $\ottnt{term}$}}\ottprodnewline
\ottprodline{|}{ pval } {\textsf{M}}{}{}{}}

\newcommand{\ottmuXXpexpr}{
\ottrulehead{pexpr}{::=}{\ottcom{pure expressions}}\ottprodnewline
\ottfirstprodline{|}{pval}{}{}{}{\ottcom{pure values}}\ottprodnewline
\ottprodline{|}{ctor\_expr  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{data constructor application}}\ottprodnewline
\ottprodline{|}{\ottkw{array\_shift} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{\ottcom{pointer array shift}}\ottprodnewline
\ottprodline{|}{\ottkw{member\_shift} \, \ottsym{(}  pval  \ottsym{,}  ident  \ottsym{,}  member  \ottsym{)}}{}{}{}{\ottcom{pointer struct/union member shift}}\ottprodnewline
\ottprodline{|}{\ottkw{not} \, \ottsym{(}  pval  \ottsym{)}}{}{}{}{\ottcom{boolean not}}\ottprodnewline
\ottprodline{|}{pval_{{\mathrm{1}}} \, \mathbin{ binop } \, pval_{{\mathrm{2}}}}{}{}{}{\ottcom{binary operations}}\ottprodnewline
\ottprodline{|}{\ottkw{memberof} \, \ottsym{(}  ident  \ottsym{,}  member  \ottsym{,}  pval  \ottsym{)}}{}{}{}{\ottcom{C struct/union member access}}\ottprodnewline
\ottprodline{|}{name  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{pure function call}}\ottprodnewline
\ottprodline{|}{\ottkw{assert\_undef} \, \ottsym{(}  pval  \ottsym{,}   \, \ottmv{UB\_name}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{bool\_to\_integer} \, \ottsym{(}  pval  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{conv\_int} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{wrapI} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{)}}{}{}{}{}}

\newcommand{\ottmuXXtpexpr}{
\ottrulehead{tpexpr}{::=}{\ottcom{top-level pure expressions}}\ottprodnewline
\ottfirstprodline{|}{tpval}{}{}{}{\ottcom{top-level pure values}}\ottprodnewline
\ottprodline{|}{\ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  tpexpr\_case\_branch_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}}{}{}{}{\ottcom{pattern matching}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, tpexpr}{}{\textsf{bind}\; \textrm{binders}(ident\_or\_pattern)\; \textsf{in}\; tpexpr}{}{\ottcom{pure let}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  {:}  \beta_{{\mathrm{1}}}  . \:  \ottnt{term_{{\mathrm{1}}}}  \ottsym{)}  =  tpexpr_{{\mathrm{1}}} \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}}{}{\textsf{bind}\; \textrm{binders}(ident\_or\_pattern)\; \textsf{in}\; tpexpr_{{\mathrm{2}}}}{}{\ottcom{annoted pure let}}\ottprodnewline
\ottbindspecprodline{}{}{}{\textsf{bind}\; \ottmv{y_{{\mathrm{1}}}}\; \textsf{in}\; \ottnt{term_{{\mathrm{1}}}}}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, pval \, \ottkw{then} \, tpexpr_{{\mathrm{1}}} \, \ottkw{else} \, tpexpr_{{\mathrm{2}}}}{}{}{}{\ottcom{pure if}}\ottprodnewline
\ottprodline{|}{ \sigma  (  tpexpr  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $tpexpr$}}}

\newcommand{\ottmuXXtpexprXXcaseXXbranch}{
\ottrulehead{tpexpr\_case\_branch}{::=}{\ottcom{pure top-level case expression branch}}\ottprodnewline
\ottfirstprodline{|}{pattern  \Rightarrow  tpexpr}{}{\textsf{bind}\; \textrm{binders}(pattern)\; \textsf{in}\; tpexpr}{}{\ottcom{top-level case expression branch}}}

\newcommand{\ottmXXkillXXkind}{
\ottrulehead{\ottnt{m\_kill\_kind}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{dynamic}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{static} \, \tau}{}{}{}{}}

\newcommand{\otttyXXbool}{
\ottrulehead{bool  ,\ \_}{::=}{\ottcom{OCaml booleans}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{true}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{}}

\newcommand{\otttyXXint}{
\ottrulehead{int  ,\ \_}{::=}{\ottcom{OCaml fixed-width integer}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{i}}{}{}{}{\ottcom{literal integer}}}

\newcommand{\ottresXXterm}{
\ottrulehead{\ottnt{res\_term}}{::=}{\ottcom{resource terms}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{emp}}{}{}{}{\ottcom{empty heap}}\ottprodnewline
\ottprodline{|}{\ottnt{points\_to}}{}{}{}{\ottcom{single-cell heap}}\ottprodnewline
\ottprodline{|}{ident}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{res\_term_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_term_{{\mathrm{2}}}}  \rangle}{}{}{}{\ottcom{seperating-conjunction pair}}\ottprodnewline
\ottprodline{|}{\ottkw{pack} \, \ottsym{(}  pval  \ottsym{,}  \ottnt{res\_term}  \ottsym{)}}{}{}{}{\ottcom{packing for existentials}}\ottprodnewline
\ottprodline{|}{\ottkw{fold} \, \ottsym{(}  \ottnt{res\_term}  \ottsym{)}}{}{}{}{\ottcom{fold into recursive res. pred.}}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{res\_term}  ) } {\textsf{M}}{}{}{\ottcom{substitution for resource terms}}}

\newcommand{\ottmuXXaction}{
\ottrulehead{mem\_action}{::=}{\ottcom{memory actions}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{create} \, \ottsym{(}  pval  \ottsym{,}  \tau  \ottsym{)}  }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{create\_readonly} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{alloc} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{kill} \, \ottsym{(}  \ottnt{m\_kill\_kind}  \ottsym{,}  pval  \ottsym{,}  \ottnt{pt}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{store} \, \ottsym{(}  bool  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  mem\_order  \ottsym{,}  \ottnt{pt}  \ottsym{)}}{}{}{}{\ottcom{true means store is locking}}\ottprodnewline
\ottprodline{|}{\ottkw{load} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{,}  mem\_order  \ottsym{,}  \ottnt{pt}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{rmw} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{,}  mem\_order_{{\mathrm{1}}}  \ottsym{,}  mem\_order_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fence} \, \ottsym{(}  mem\_order  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cmp\_exch\_strong} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{,}  mem\_order_{{\mathrm{1}}}  \ottsym{,}  mem\_order_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{cmp\_exch\_weak} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{,}  mem\_order_{{\mathrm{1}}}  \ottsym{,}  mem\_order_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{linux\_fence} \, \ottsym{(}  linux\_mem\_order  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{linux\_load} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{,}  linux\_mem\_order  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{linux\_store} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  linux\_mem\_order  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{linux\_rmw} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  linux\_mem\_order  \ottsym{)}}{}{}{}{}}

\newcommand{\ottpolarity}{
\ottrulehead{\ottnt{polarity}}{::=}{\ottcom{polarities for memory actions}}\ottprodnewline
\ottfirstprodline{|}{  }{}{}{}{\ottcom{(pos) sequenced by \ottkw{let\ weak} and \ottkw{let\ strong}}}\ottprodnewline
\ottprodline{|}{ \texttt{neg} }{}{}{}{\ottcom{only sequenced by \ottkw{let\ strong}}}}

\newcommand{\ottmuXXpaction}{
\ottrulehead{pol\_mem\_action}{::=}{\ottcom{memory actions with polarity}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{polarity} \, mem\_action}{}{}{}{}}

\newcommand{\ottmuXXmemop}{
\ottrulehead{mem\_op}{::=}{\ottcom{operations involving the memory state}}\ottprodnewline
\ottfirstprodline{|}{pval_{{\mathrm{1}}} \, \mathbin{ binop_{rel} } \, pval_{{\mathrm{2}}}}{}{}{}{\ottcom{pointer relational binary operations}}\ottprodnewline
\ottprodline{|}{ pval_{{\mathrm{1}}}  -_{  \tau  }  pval_{{\mathrm{2}}} }{}{}{}{\ottcom{pointer subtraction}}\ottprodnewline
\ottprodline{|}{\ottkw{intFromPtr} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  pval  \ottsym{)}}{}{}{}{\ottcom{cast of pointer value to integer value}}\ottprodnewline
\ottprodline{|}{\ottkw{ptrFromInt} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  pval  \ottsym{)}}{}{}{}{\ottcom{cast of integer value to pointer value}}\ottprodnewline
\ottprodline{|}{\ottkw{ptrValidForDeref} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{,}  \ottnt{pt}  \ottsym{)}}{}{}{}{\ottcom{dereferencing validity predicate}}\ottprodnewline
\ottprodline{|}{\ottkw{ptrWellAligned} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{ptrArrayShift} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{memcpy} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{memcmp} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{realloc} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{,}  pval_{{\mathrm{3}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{va\_start} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{va\_copy} \, \ottsym{(}  pval  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{va\_arg} \, \ottsym{(}  pval  \ottsym{,}  \tau  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{va\_end} \, \ottsym{(}  pval  \ottsym{)}}{}{}{}{}}

\newcommand{\ottspineXXelem}{
\ottrulehead{\ottnt{spine\_elem}}{::=}{\ottcom{spine element}}\ottprodnewline
\ottfirstprodline{|}{pval}{}{}{}{\ottcom{pure or logical value}}\ottprodnewline
\ottprodline{|}{\ottnt{res\_term}}{}{}{}{\ottcom{resource value}}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{spine\_elem}  ) } {\textsf{M}}{}{}{\ottcom{substitution for spine elements / return values}}}

\newcommand{\ottspine}{
\ottrulehead{\ottnt{spine}}{::=}{\ottcom{spine}}\ottprodnewline
\ottfirstprodline{|}{\ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}}{}{}{}{}}

\newcommand{\ottmuXXtval}{
\ottrulehead{tval}{::=}{\ottcom{(effectful) top-level values}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{done} \, \ottnt{spine}}{}{}{}{\ottcom{end of top-level expression}}\ottprodnewline
\ottprodline{|}{\ottkw{undef} \,  \, \ottmv{UB\_name}}{}{}{}{\ottcom{undefined behaviour}}}

\newcommand{\ottresXXpattern}{
\ottrulehead{\ottnt{res\_pattern}}{::=}{\ottcom{resource terms}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{emp}}{}{\textrm{binders}=\{\}}{}{\ottcom{empty heap}}\ottprodnewline
\ottprodline{|}{ident}{}{\textrm{binders}=ident}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottkw{fold} \, \ottsym{(}  \ottnt{res\_pattern}  \ottsym{)}}{}{\textrm{binders}=\{\}}{}{\ottcom{unfold (recursive) predicate}}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{res\_pattern_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_pattern_{{\mathrm{2}}}}  \rangle}{}{\textrm{binders}=\textrm{binders}(\ottnt{res\_pattern_{{\mathrm{1}}}}) \cup  \textrm{binders}(\ottnt{res\_pattern_{{\mathrm{2}}}})}{}{\ottcom{seperating-conjunction pair}}\ottprodnewline
\ottprodline{|}{\ottkw{pack} \, \ottsym{(}  ident  \ottsym{,}  \ottnt{res\_pattern}  \ottsym{)}}{}{\textrm{binders}=ident \cup  \textrm{binders}(\ottnt{res\_pattern})}{}{\ottcom{packing for existentials}}}

\newcommand{\ottretXXpattern}{
\ottrulehead{\ottnt{ret\_pattern}}{::=}{\ottcom{return pattern}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{comp} \, ident\_or\_pattern}{}{\textrm{binders}=\textrm{binders}(ident\_or\_pattern)}{}{\ottcom{computational variable}}\ottprodnewline
\ottprodline{|}{\ottkw{log} \, ident}{}{\textrm{binders}=ident}{}{\ottcom{logical variable}}\ottprodnewline
\ottprodline{|}{\texttt{res} \, \ottnt{res\_pattern}}{}{\textrm{binders}=\textrm{binders}(\ottnt{res\_pattern})}{}{\ottcom{resource variable}}}

\newcommand{\ottinitXXt}{
\ottrulehead{init  ,\ }{::=}{\ottcom{initialisation status}}\ottprodnewline
\ottfirstprodline{|}{\checkmark}{}{}{}{\ottcom{initialised}}\ottprodnewline
\ottprodline{|}{ {  \times  } }{}{}{}{\ottcom{uninitalised}}}

\newcommand{\ottpointsXXto}{
\ottrulehead{\ottnt{points\_to}  ,\ \ottnt{pt}}{::=}{\ottcom{points-to separation logic predicate}}\ottprodnewline
\ottfirstprodline{|}{ term_{{\mathrm{1}}}  \mathbin{ { \overset{  init  }{ \mapsto } }_{  \tau  } }  term_{{\mathrm{2}}} }{}{}{}{}}

\newcommand{\ottres}{
\ottrulehead{\ottnt{res}}{::=}{\ottcom{resources}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{emp}}{}{}{}{\ottcom{empty heap}}\ottprodnewline
\ottprodline{|}{\ottnt{points\_to}}{}{}{}{\ottcom{points-top heap pred.}}\ottprodnewline
\ottprodline{|}{\ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}}}{}{}{}{\ottcom{seperating conjunction}}\ottprodnewline
\ottprodline{|}{\exists \, ident  {:}  \beta  . \:  \ottnt{res}}{}{}{}{\ottcom{existential}}\ottprodnewline
\ottprodline{|}{term  \wedge  \ottnt{res}}{}{}{}{\ottcom{logical conjuction}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, term \, \ottkw{then} \, \ottnt{res_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{2}}}}}{}{}{}{\ottcom{ordered disjuction}}\ottprodnewline
\ottprodline{|}{{ \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{}{}{}{\ottcom{predicate}}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{res}  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $\ottnt{res}$}}}

\newcommand{\ottret}{
\ottrulehead{\ottnt{ret}  ,\ \_}{::=}{\ottcom{return types}}\ottprodnewline
\ottfirstprodline{|}{\Sigma \, ident  {:}  \beta  . \:  \ottnt{ret}}{}{}{}{\ottcom{return a computational value}}\ottprodnewline
\ottprodline{|}{\exists \, ident  {:}  \beta  . \:  \ottnt{ret}}{}{}{}{\ottcom{return a logical value}}\ottprodnewline
\ottprodline{|}{\ottnt{res}  \otimes  \ottnt{ret}}{}{}{}{\ottcom{return a resource value}}\ottprodnewline
\ottprodline{|}{term  \wedge  \ottnt{ret}}{}{}{}{\ottcom{return a predicate (post-condition)}}\ottprodnewline
\ottprodline{|}{\ottkw{I}}{}{}{}{\ottcom{end return list}}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{ret}  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $\ottnt{ret}$}}}

\newcommand{\ottmuXXseqXXexpr}{
\ottrulehead{seq\_expr}{::=}{\ottcom{sequential (effectful) expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{ccall} \, \ottsym{(}  \tau  \ottsym{,}  ident  \ottsym{,}  \ottnt{spine}  \ottsym{)}}{}{}{}{\ottcom{C function call}}\ottprodnewline
\ottprodline{|}{\ottkw{pcall} \, \ottsym{(}  name  \ottsym{,}  \ottnt{spine}  \ottsym{)}}{}{}{}{\ottcom{procedure call}}}

\newcommand{\ottmuXXseqXXtexpr}{
\ottrulehead{seq\_texpr}{::=}{\ottcom{sequential top-level (effectful) expressions}}\ottprodnewline
\ottfirstprodline{|}{tval}{}{}{}{\ottcom{(effectful) top-level values}}\ottprodnewline
\ottprodline{|}{\ottkw{run} \, ident \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{\ottcom{run from label}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, texpr}{}{\textsf{bind}\; \textrm{binders}(ident\_or\_pattern)\; \textsf{in}\; texpr}{}{\ottcom{pure let}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  {:}  \beta_{{\mathrm{1}}}  . \:  \ottnt{term_{{\mathrm{1}}}}  \ottsym{)}  =  tpexpr \, \ottkw{in} \, texpr}{}{\textsf{bind}\; \textrm{binders}(ident\_or\_pattern)\; \textsf{in}\; texpr}{}{\ottcom{annotated pure let}}\ottprodnewline
\ottbindspecprodline{}{}{}{\textsf{bind}\; \ottmv{y_{{\mathrm{1}}}}\; \textsf{in}\; \ottnt{term_{{\mathrm{1}}}}}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  seq\_expr \, \ottkw{in} \, texpr}{}{\textsf{bind}\; \textrm{binders}(\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}})\; \textsf{in}\; texpr}{}{\ottcom{bind return patterns}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  =  texpr_{{\mathrm{1}}} \, \ottkw{in} \, texpr_{{\mathrm{2}}}}{}{\textsf{bind}\; \textrm{binders}(\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}})\; \textsf{in}\; texpr_{{\mathrm{2}}}}{}{\ottcom{annotated bind return patterns}}\ottprodnewline
\ottprodline{|}{\ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  texpr\_case\_branch_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}}{}{}{}{\ottcom{pattern matching}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, pval \, \ottkw{then} \, texpr_{{\mathrm{1}}} \, \ottkw{else} \, texpr_{{\mathrm{2}}}}{}{}{}{\ottcom{conditional}}\ottprodnewline
\ottprodline{|}{\ottkw{bound} \, \ottsym{[}  int  \ottsym{]}  \ottsym{(}  is\_texpr  \ottsym{)}}{}{}{}{\ottcom{limit scope of indet seq behaviour, absent at runtime}}}

\newcommand{\ottmuXXtexprXXcaseXXbranch}{
\ottrulehead{texpr\_case\_branch}{::=}{\ottcom{top-level case expression branch}}\ottprodnewline
\ottfirstprodline{|}{pattern  \Rightarrow  texpr}{}{\textsf{bind}\; \textrm{binders}(pattern)\; \textsf{in}\; texpr}{}{\ottcom{top-level case expression branch}}}

\newcommand{\ottmuXXisXXexpr}{
\ottrulehead{is\_expr}{::=}{\ottcom{indet seq (effectful) expressions}}\ottprodnewline
\ottfirstprodline{|}{tval}{}{}{}{\ottcom{(effectful) top-level values}}\ottprodnewline
\ottprodline{|}{\ottkw{memop} \, \ottsym{(}  mem\_op  \ottsym{)}}{}{}{}{\ottcom{pointer op involving memory}}\ottprodnewline
\ottprodline{|}{pol\_mem\_action}{}{}{}{\ottcom{memory action}}}

\newcommand{\ottmuXXisXXtexpr}{
\ottrulehead{is\_texpr}{::=}{\ottcom{indet seq top-level (effectful) expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{let} \, \ottkw{weak} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  is\_expr \, \ottkw{in} \, texpr}{}{\textsf{bind}\; \textrm{binders}(\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}})\; \textsf{in}\; texpr}{}{\ottcom{weak sequencing}}\ottprodnewline
\ottprodline{|}{\ottkw{let} \, \ottkw{strong} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  is\_expr \, \ottkw{in} \, texpr}{}{\textsf{bind}\; \textrm{binders}(\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}})\; \textsf{in}\; texpr}{}{\ottcom{strong sequencing}}}

\newcommand{\ottmuXXtexpr}{
\ottrulehead{texpr}{::=}{\ottcom{top-level (effectful) expressions}}\ottprodnewline
\ottfirstprodline{|}{seq\_texpr}{}{}{}{\ottcom{sequential (effectful) expressions}}\ottprodnewline
\ottprodline{|}{is\_texpr}{}{}{}{\ottcom{indet seq (effectful) expressions}}\ottprodnewline
\ottprodline{|}{ \sigma  (  texpr  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $texpr$}}}

\newcommand{\ottarg}{
\ottrulehead{\ottnt{arg}}{::=}{\ottcom{argument/function types}}\ottprodnewline
\ottfirstprodline{|}{\Pi \, ident  {:}  \beta  . \:  \ottnt{arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\forall \, ident  {:}  \beta  . \:  \ottnt{arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{res}  \multimap  \ottnt{arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term  \supset  \ottnt{arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sigma  (  \ottnt{arg}  ) } {\textsf{M}}{}{}{\ottcom{simul-sub $\sigma$ in $\ottnt{arg}$}}}

\newcommand{\ottpureXXarg}{
\ottrulehead{\ottnt{pure\_arg}}{::=}{\ottcom{pure argument/function types}}\ottprodnewline
\ottfirstprodline{|}{\Pi \, ident  {:}  \beta  . \:  \ottnt{pure\_arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term  \supset  \ottnt{pure\_arg}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{pure\_ret}}{}{}{}{}}

\newcommand{\ottpureXXret}{
\ottrulehead{\ottnt{pure\_ret}}{::=}{\ottcom{pure return types}}\ottprodnewline
\ottfirstprodline{|}{\Sigma \, ident  {:}  \beta  . \:  \ottnt{pure\_ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term  \wedge  \ottnt{pure\_ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{I}}{}{}{}{}}

\newcommand{\ottC}{
\ottrulehead{\mathcal{C}}{::=}{\ottcom{computational var env}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{,}  ident  {:}  \beta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\mathcal{C}_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{}}

\newcommand{\ottL}{
\ottrulehead{\mathcal{L}}{::=}{\ottcom{logical var env}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\mathcal{L}_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{L}  \ottsym{,}  ident  {:}  \beta}{}{}{}{}}

\newcommand{\ottN}{
\ottrulehead{\Phi}{::=}{\ottcom{constraints env}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Phi  \ottsym{,}  term}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\Phi_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{}}

\newcommand{\ottR}{
\ottrulehead{\mathcal{R}}{::=}{\ottcom{resources env}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{R}  \ottsym{,}  ident  {:}  \ottnt{res}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\mathcal{R}_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{}}

\newcommand{\ottsubs}{
\ottrulehead{\sigma  ,\ \psi}{::=}{\ottcom{substitutions}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{spine\_elem}  \ottsym{/}  ident  \ottsym{,}  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{term  \ottsym{/}  ident  \ottsym{,}  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\sigma_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \sigma  (  \psi  ) } {\textsf{M}}{}{}{\ottcom{apply $\sigma$ to all elements in $\psi$}}}

\newcommand{\otttyping}{
\ottrulehead{\ottnt{typing}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ident  {:}  \beta \, \in \, \mathcal{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ident  {:}  \beta \, \in \, \mathcal{L}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{struct} \, tag  \ \& \, \ottcomp{member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}}{\ottmv{i}} \, \in \, \ottkw{Globals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{{ \alpha } \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}  {:}  \beta_{\ottmv{i}}}{\ottmv{i}} \, \mapsto  \ottnt{res} \, \in \, \ottkw{Globals}}{}{}{}{\ottcom{recursive resource predicate}}\ottprodnewline
\ottprodline{|}{\ottcomp{\mathcal{C}_{\ottmv{i}}  \ottsym{;}  \mathcal{L}_{\ottmv{i}}  \ottsym{;}  \Phi_{\ottmv{i}}  \vdash  mem\_val_{\ottmv{i}}  \Rightarrow \, \ottkw{mem} \, \beta_{\ottmv{i}}}{\ottmv{i}}}{}{}{}{\ottcom{dependent on memory object model}}}

\newcommand{\ottopsem}{
\ottrulehead{\ottnt{opsem}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\forall \, \ottmv{i}  \ottsym{<}  \ottmv{j}  . \: \, \ottkw{not} \, \ottsym{(}  pattern_{\ottmv{i}}  =  pval  \leadsto  \sigma_{\ottmv{i}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{fresh} \, \ottsym{(}  mem\_ptr  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term}{}{}{}{}\ottprodnewline
\ottprodline{|}{pval  {:}  \beta}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{typing}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{opsem}}{}{}{}{}\ottprodnewline
\ottprodline{|}{term \, \equiv \, term'}{}{}{}{}\ottprodnewline
\ottprodline{|}{name  {:}  \ottnt{pure\_arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  tpexpr \, \in \, \ottkw{Globals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{name  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}{}{}{}{}}

\newcommand{\ottheap}{
\ottrulehead{\ottnt{heap}  ,\ \ottnt{h}  ,\ \ottnt{f}}{::=}{\ottcom{heaps}}\ottprodnewline
\ottfirstprodline{|}{\cdot}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{h}  \ottsym{+}  \ottsym{\{}  \ottnt{points\_to}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{h}  \ottsym{+}  \ottnt{f}}{}{}{\textsf{[O]}}{\ottcom{convenient for the soundness proof}}}

\newcommand{\ottlemmaXXjtype}{
\ottrulehead{\ottnt{lemma\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}{}{}{}{}}

\newcommand{\ottresXXjtype}{
\ottrulehead{\ottnt{res\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Phi  \vdash  \ottnt{res} \, \equiv \, \ottnt{res'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{h}  {:}  \mathcal{R}}{}{}{}{}}

\newcommand{\ottobjectXXvalueXXjtype}{
\ottrulehead{\ottnt{object\_value\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  object\_value  \Rightarrow \, \ottkw{obj} \, \beta}{}{}{}{}}

\newcommand{\ottpvalXXjtype}{
\ottrulehead{\ottnt{pval\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}{}{}{}{}}

\newcommand{\ottspineXXjtype}{
\ottrulehead{\ottnt{spine\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottpexprXXjtype}{
\ottrulehead{\ottnt{pexpr\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pexpr  \Rightarrow  \ottmv{ident}  {:}  \beta  . \:  term}{}{}{}{}}

\newcommand{\ottcompXXpatternXXjtype}{
\ottrulehead{\ottnt{comp\_pattern\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}{}{}{}{}\ottprodnewline
\ottprodline{|}{ident\_or\_pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}{}{}{}{}}

\newcommand{\ottresXXpatternXXjtype}{
\ottrulehead{\ottnt{res\_pattern\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Phi  \vdash  \ottnt{res'}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Phi  \vdash  \ottnt{res} \, \ottkw{as} \, \ottnt{res\_pattern}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Phi  \vdash  \ottnt{res\_pattern}  {:}  \ottnt{res}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{}{}{}{}}

\newcommand{\ottretXXpatternXXjtype}{
\ottrulehead{\ottnt{ret\_pattern\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{}{}{}{}}

\newcommand{\otttpvalXXjtype}{
\ottrulehead{\ottnt{tpval\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpval  \Leftarrow  \ottmv{ident}  {:}  \beta  . \:  term}{}{}{}{}}

\newcommand{\otttpexprXXjtype}{
\ottrulehead{\ottnt{tpexpr\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpexpr  \Leftarrow  \ottmv{ident}  {:}  \beta  . \:  term}{}{}{}{}}

\newcommand{\ottactionXXjtype}{
\ottrulehead{\ottnt{action\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_action  \Rightarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottmemopXXjtype}{
\ottrulehead{\ottnt{memop\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_op  \Rightarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\otttvalXXjtype}{
\ottrulehead{\ottnt{tval\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  tval  \Leftarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottseqXXexprXXjtype}{
\ottrulehead{\ottnt{seq\_expr\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_expr  \Rightarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottisXXexprXXjtype}{
\ottrulehead{\ottnt{is\_expr\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_expr  \Rightarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\otttexprXXjtype}{
\ottrulehead{\ottnt{texpr\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_texpr  \Leftarrow  \ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_texpr  \Leftarrow  \ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  texpr  \Leftarrow  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottsubsXXjtype}{
\ottrulehead{\ottnt{subs\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{pattern  =  pval  \leadsto  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{ident\_or\_pattern  =  pval  \leadsto  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{res\_pattern}  =  \ottnt{res\_term}  \leadsto  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}{}{}{}{}}

\newcommand{\ottpureXXopsemXXjtype}{
\ottrulehead{\ottnt{pure\_opsem\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\langle  pexpr  \rangle  \longrightarrow  \langle  pexpr'  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  pexpr  \rangle  \longrightarrow  \langle  tpexpr  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  term  \ottsym{)}  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  tpexpr  \rangle  \longrightarrow  \langle  tpexpr'  \rangle}{}{}{}{}}

\newcommand{\ottopsemXXjtype}{
\ottrulehead{\ottnt{opsem\_jtype}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\langle  \ottnt{h}  \ottsym{;}  seq\_expr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  {:}  \ottnt{ret}  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  seq\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  mem\_op  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  is\_expr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  is\_expr'  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  is\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle}{}{}{}{}\ottprodnewline
\ottprodline{|}{\langle  \ottnt{h}  \ottsym{;}  texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr'  \rangle}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottSctypesXXt\ottinterrule
\otttyXXtag\ottinterrule
\ottbaseXXtype\ottinterrule
\ottbinop\ottinterrule
\ottarithXXbinop\ottinterrule
\ottrelXXbinop\ottinterrule
\ottboolXXbinop\ottinterrule
\otttyXXmemXXint\ottinterrule
\ottmuXXobjectXXvalue\ottinterrule
\ottmuXXloadedXXvalue\ottinterrule
\ottmuXXvalue\ottinterrule
\ottmuXXboolXXvalue\ottinterrule
\ottmuXXctorXXval\ottinterrule
\ottmuXXctorXXexpr\ottinterrule
\ottmuXXname\ottinterrule
\ottmuXXpval\ottinterrule
\ottmuXXtpval\ottinterrule
\otttyXXsymXXoptXXTXXbt\ottinterrule
\ottmuXXpattern\ottinterrule
\ottZXXt\ottinterrule
\ottrational\ottinterrule
\ottlit\ottinterrule
\ottmuXXsymXXorXXpattern\ottinterrule
\ottboolXXop\ottinterrule
\ottarithXXop\ottinterrule
\ottcmpXXop\ottinterrule
\ottlistXXop\ottinterrule
\otttupleXXop\ottinterrule
\ottpointerXXop\ottinterrule
\ottarrayXXop\ottinterrule
\ottparamXXop\ottinterrule
\ottstructXXop\ottinterrule
\ottctXXpred\ottinterrule
\ottterm\ottinterrule
\ottmuXXpexpr\ottinterrule
\ottmuXXtpexpr\ottinterrule
\ottmuXXtpexprXXcaseXXbranch\ottinterrule
\ottmXXkillXXkind\ottinterrule
\otttyXXbool\ottinterrule
\otttyXXint\ottinterrule
\ottresXXterm\ottinterrule
\ottmuXXaction\ottinterrule
\ottpolarity\ottinterrule
\ottmuXXpaction\ottinterrule
\ottmuXXmemop\ottinterrule
\ottspineXXelem\ottinterrule
\ottspine\ottinterrule
\ottmuXXtval\ottinterrule
\ottresXXpattern\ottinterrule
\ottretXXpattern\ottinterrule
\ottinitXXt\ottinterrule
\ottpointsXXto\ottinterrule
\ottres\ottinterrule
\ottret\ottinterrule
\ottmuXXseqXXexpr\ottinterrule
\ottmuXXseqXXtexpr\ottinterrule
\ottmuXXtexprXXcaseXXbranch\ottinterrule
\ottmuXXisXXexpr\ottinterrule
\ottmuXXisXXtexpr\ottinterrule
\ottmuXXtexpr\ottinterrule
\ottarg\ottinterrule
\ottpureXXarg\ottinterrule
\ottpureXXret\ottinterrule
\ottC\ottinterrule
\ottL\ottinterrule
\ottN\ottinterrule
\ottR\ottinterrule
\ottsubs\ottinterrule
\otttyping\ottinterrule
\ottopsem\ottinterrule
\ottformula\ottinterrule
\ottheap\ottinterrule
\ottlemmaXXjtype\ottinterrule
\ottresXXjtype\ottinterrule
\ottobjectXXvalueXXjtype\ottinterrule
\ottpvalXXjtype\ottinterrule
\ottspineXXjtype\ottinterrule
\ottpexprXXjtype\ottinterrule
\ottcompXXpatternXXjtype\ottinterrule
\ottresXXpatternXXjtype\ottinterrule
\ottretXXpatternXXjtype\ottinterrule
\otttpvalXXjtype\ottinterrule
\otttpexprXXjtype\ottinterrule
\ottactionXXjtype\ottinterrule
\ottmemopXXjtype\ottinterrule
\otttvalXXjtype\ottinterrule
\ottseqXXexprXXjtype\ottinterrule
\ottisXXexprXXjtype\ottinterrule
\otttexprXXjtype\ottinterrule
\ottsubsXXjtype\ottinterrule
\ottpureXXopsemXXjtype\ottinterrule
\ottopsemXXjtype\ottafterlastrule
}}

% defnss
% defns lemma_jtype
%% defn Arg_Env
\newcommand{\ottdruleArgXXEnvXXRet}[1]{\ottdrule[#1]{%
}{
\,  \mathbin{ {:} {:} }  \ottnt{ret}  \leadsto  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \mid  \ottnt{ret}}{%
{\ottdrulename{Arg\_Env\_Ret}}{}%
}}


\newcommand{\ottdruleArgXXEnvXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}%
}{
\ottmv{x}  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \Pi \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}{%
{\ottdrulename{Arg\_Env\_Comp}}{}%
}}


\newcommand{\ottdruleArgXXEnvXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}%
}{
\ottmv{x}  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \forall \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}{%
{\ottdrulename{Arg\_Env\_Log}}{}%
}}


\newcommand{\ottdruleArgXXEnvXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}%
}{
\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  term  \supset  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}  term  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}{%
{\ottdrulename{Arg\_Env\_Phi}}{}%
}}


\newcommand{\ottdruleArgXXEnvXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}}%
}{
\ottmv{x}  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{res}  \multimap  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \ottsym{,}  \ottmv{x}  {:}  \ottnt{res}  \mid  \ottnt{ret}}{%
{\ottdrulename{Arg\_Env\_Res}}{}%
}}

\newcommand{\ottdefnArgXXEnv}[1]{\begin{ottdefnblock}[#1]{$\ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \leadsto  \mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \mid  \ottnt{ret}$}{}
\ottusedrule{\ottdruleArgXXEnvXXRet{}}
\ottusedrule{\ottdruleArgXXEnvXXComp{}}
\ottusedrule{\ottdruleArgXXEnvXXLog{}}
\ottusedrule{\ottdruleArgXXEnvXXPhi{}}
\ottusedrule{\ottdruleArgXXEnvXXRes{}}
\end{ottdefnblock}}

%% defn Weak
\newcommand{\ottdruleWeakXXEmpty}[1]{\ottdrule[#1]{%
}{
\cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \sqsubseteq  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot}{%
{\ottdrulename{Weak\_Empty}}{}%
}}


\newcommand{\ottdruleWeakXXConsXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Cons\_Comp}}{}%
}}


\newcommand{\ottdruleWeakXXConsXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Cons\_Log}}{}%
}}


\newcommand{\ottdruleWeakXXConsXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}  term  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{,}  term  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Cons\_Phi}}{}%
}}


\newcommand{\ottdruleWeakXXConsXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \ottsym{,}  \ottmv{x}  {:}  \ottnt{res}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{,}  \ottmv{x}  {:}  \ottnt{res}}{%
{\ottdrulename{Weak\_Cons\_Res}}{}%
}}


\newcommand{\ottdruleWeakXXSkipXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Skip\_Comp}}{}%
}}


\newcommand{\ottdruleWeakXXSkipXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Skip\_Log}}{}%
}}


\newcommand{\ottdruleWeakXXSkipXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{,}  term  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Weak\_Skip\_Phi}}{}%
}}

\newcommand{\ottdefnWeak}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \sqsubseteq  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'$}{}
\ottusedrule{\ottdruleWeakXXEmpty{}}
\ottusedrule{\ottdruleWeakXXConsXXComp{}}
\ottusedrule{\ottdruleWeakXXConsXXLog{}}
\ottusedrule{\ottdruleWeakXXConsXXPhi{}}
\ottusedrule{\ottdruleWeakXXConsXXRes{}}
\ottusedrule{\ottdruleWeakXXSkipXXComp{}}
\ottusedrule{\ottdruleWeakXXSkipXXLog{}}
\ottusedrule{\ottdruleWeakXXSkipXXPhi{}}
\end{ottdefnblock}}

%% defn Ty_Subs
\newcommand{\ottdruleTyXXSubsXXEmpty}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottsym{(}  \cdot  \ottsym{)}  {:}  \ottsym{(}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{)}}{%
{\ottdrulename{Ty\_Subs\_Empty}}{}%
}}


\newcommand{\ottdruleTyXXSubsXXConsXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}{%
{\ottdrulename{Ty\_Subs\_Cons\_Comp}}{}%
}}


\newcommand{\ottdruleTyXXSubsXXConsXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}{%
{\ottdrulename{Ty\_Subs\_Cons\_Log}}{}%
}}


\newcommand{\ottdruleTyXXSubsXXConsXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{,}  term  \ottsym{;}  \mathcal{R}'  \ottsym{)}}{%
{\ottdrulename{Ty\_Subs\_Cons\_Phi}}{}%
}}


\newcommand{\ottdruleTyXXSubsXXConsXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \vdash  \ottnt{res\_term}  \Leftarrow   \sigma  (  \ottnt{res}  ) }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \ottsym{,}  \mathcal{R}_{{\mathrm{1}}}  \vdash  \ottsym{(}  \ottnt{res\_term}  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{,}  \ottmv{x}  {:}  \ottnt{res}  \ottsym{)}}{%
{\ottdrulename{Ty\_Subs\_Cons\_Res}}{}%
}}

\newcommand{\ottdefnTyXXSubs}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottsym{(}  \sigma  \ottsym{)}  {:}  \ottsym{(}  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'  \ottsym{)}$}{}
\ottusedrule{\ottdruleTyXXSubsXXEmpty{}}
\ottusedrule{\ottdruleTyXXSubsXXConsXXComp{}}
\ottusedrule{\ottdruleTyXXSubsXXConsXXLog{}}
\ottusedrule{\ottdruleTyXXSubsXXConsXXPhi{}}
\ottusedrule{\ottdruleTyXXSubsXXConsXXRes{}}
\end{ottdefnblock}}


\newcommand{\ottdefnslemmaXXjtype}{
\ottdefnArgXXEnv{}\ottdefnWeak{}\ottdefnTyXXSubs{}}

% defns res_jtype
%% defn Res_Eq
\newcommand{\ottdruleTyXXResXXEqXXEmp}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottkw{emp} \, \equiv \, \ottkw{emp}}{%
{\ottdrulename{Ty\_Res\_Eq\_Emp}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXPointsTo}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottsym{(}  term_{{\mathrm{1}}}  =  term'_{{\mathrm{1}}}  \ottsym{)}  \wedge  \ottsym{(}  term_{{\mathrm{2}}}  =  term'_{{\mathrm{2}}}  \ottsym{)}  \ottsym{)}}%
}{
\Phi  \vdash   term_{{\mathrm{1}}}  \mathbin{ { \overset{  init  }{ \mapsto } }_{  \tau  } }  term_{{\mathrm{2}}}  \, \equiv \,  term'_{{\mathrm{1}}}  \mathbin{ { \overset{  init  }{ \mapsto } }_{  \tau  } }  term'_{{\mathrm{2}}} }{%
{\ottdrulename{Ty\_Res\_Eq\_PointsTo}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXSepConj}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res_{{\mathrm{1}}}} \, \equiv \, \ottnt{res'_{{\mathrm{1}}}}}%
\ottpremise{\Phi  \vdash  \ottnt{res_{{\mathrm{2}}}} \, \equiv \, \ottnt{res'_{{\mathrm{2}}}}}%
}{
\Phi  \vdash  \ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}} \, \equiv \, \ottnt{res'_{{\mathrm{1}}}}  *  \ottnt{res'_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Res\_Eq\_SepConj}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXExists}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res} \, \equiv \, \ottnt{res'}}%
}{
\Phi  \vdash  \exists \, ident  {:}  \beta  . \:  \ottnt{res} \, \equiv \, \exists \, ident  {:}  \beta  . \:  \ottnt{res'}}{%
{\ottdrulename{Ty\_Res\_Eq\_Exists}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXTerm}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottsym{(}  term  \rightarrow  term'  \ottsym{)}  \wedge  \ottsym{(}  term'  \rightarrow  term  \ottsym{)}  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res} \, \equiv \, \ottnt{res'}}%
}{
\Phi  \vdash  term  \wedge  \ottnt{res} \, \equiv \, term'  \wedge  \ottnt{res'}}{%
{\ottdrulename{Ty\_Res\_Eq\_Term}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXOrdDisj}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottsym{(}  term_{{\mathrm{1}}}  \rightarrow  term_{{\mathrm{2}}}  \ottsym{)}  \wedge  \ottsym{(}  term_{{\mathrm{2}}}  \rightarrow  term_{{\mathrm{1}}}  \ottsym{)}  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res_{{\mathrm{11}}}} \, \equiv \, \ottnt{res_{{\mathrm{21}}}}}%
\ottpremise{\Phi  \vdash  \ottnt{res_{{\mathrm{21}}}} \, \equiv \, \ottnt{res_{{\mathrm{22}}}}}%
}{
\Phi  \vdash  \ottkw{if} \, term_{{\mathrm{1}}} \, \ottkw{then} \, \ottnt{res_{{\mathrm{11}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{12}}}} \, \equiv \, \ottkw{if} \, term_{{\mathrm{2}}} \, \ottkw{then} \, \ottnt{res_{{\mathrm{21}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{22}}}}}{%
{\ottdrulename{Ty\_Res\_Eq\_OrdDisj}}{}%
}}


\newcommand{\ottdruleTyXXResXXEqXXPred}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)} \, \equiv \, { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{%
{\ottdrulename{Ty\_Res\_Eq\_Pred}}{}%
}}

\newcommand{\ottdefnTyXXResXXEq}[1]{\begin{ottdefnblock}[#1]{$\Phi  \vdash  \ottnt{res} \, \equiv \, \ottnt{res'}$}{}
\ottusedrule{\ottdruleTyXXResXXEqXXEmp{}}
\ottusedrule{\ottdruleTyXXResXXEqXXPointsTo{}}
\ottusedrule{\ottdruleTyXXResXXEqXXSepConj{}}
\ottusedrule{\ottdruleTyXXResXXEqXXExists{}}
\ottusedrule{\ottdruleTyXXResXXEqXXTerm{}}
\ottusedrule{\ottdruleTyXXResXXEqXXOrdDisj{}}
\ottusedrule{\ottdruleTyXXResXXEqXXPred{}}
\end{ottdefnblock}}

%% defn Res
\newcommand{\ottdruleTyXXResXXEmp}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{emp}  \Leftarrow  \ottkw{emp}}{%
{\ottdrulename{Ty\_Res\_Emp}}{}%
}}


\newcommand{\ottdruleTyXXResXXPointsTo}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{points\_to} \, \equiv \, \ottnt{points\_to'}}%
\ottpremise{\Phi  \vdash  \ottnt{points\_to'} \, \equiv \, \ottnt{points\_to''}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \ottsym{,}  \ottmv{\_}  {:}  \ottnt{points\_to}  \vdash  \ottnt{points\_to'}  \Leftarrow  \ottnt{points\_to''}}{%
{\ottdrulename{Ty\_Res\_PointsTo}}{}%
}}


\newcommand{\ottdruleTyXXResXXVar}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res'_{{\mathrm{1}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res_{{\mathrm{1}}}}  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res'_{{\mathrm{2}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res'_{{\mathrm{1}}}} \, \equiv \, \ottnt{res'_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \ottsym{,}  \ottmv{r}  {:}  \ottnt{res_{{\mathrm{1}}}}  \vdash  \ottmv{r}  \Leftarrow  \ottnt{res_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Res\_Var}}{}%
}}


\newcommand{\ottdruleTyXXResXXSepConj}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \vdash  \ottnt{res\_term_{{\mathrm{1}}}}  \Leftarrow  \ottnt{res_{{\mathrm{1}}}}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}  \vdash  \ottnt{res\_term_{{\mathrm{2}}}}  \Leftarrow  \ottnt{res_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{R}_{{\mathrm{2}}}  \vdash  \langle  \ottnt{res\_term_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_term_{{\mathrm{2}}}}  \rangle  \Leftarrow  \ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Res\_SepConj}}{}%
}}


\newcommand{\ottdruleTyXXResXXConj}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow  term  \wedge  \ottnt{res}}{%
{\ottdrulename{Ty\_Res\_Conj}}{}%
}}


\newcommand{\ottdruleTyXXResXXPack}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow   pval  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{res}  ) }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{pack} \, \ottsym{(}  pval  \ottsym{,}  \ottnt{res\_term}  \ottsym{)}  \Leftarrow  \exists \, \ottmv{y}  {:}  \beta  . \:  \ottnt{res}}{%
{\ottdrulename{Ty\_Res\_Pack}}{}%
}}


\newcommand{\ottdruleTyXXResXXFold}[1]{\ottdrule[#1]{%
\ottpremise{{ \alpha } \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}  {:}  \beta_{\ottmv{i}}}{\ottmv{i}} \, \mapsto  \ottnt{res} \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{\ottmv{i}}  \Rightarrow  \beta_{\ottmv{i}}}{\ottmv{i}}}%
\ottpremise{\Phi  \vdash  \ottnt{res'}  = \, \ottkw{strip\_ifs} \, \ottsym{(}   \ottcomp{pval_{\ottmv{i}}  \ottsym{/}  \ottmv{x_{\ottmv{i}}}  \ottsym{,}  \cdot}{\ottmv{i}}  (  \ottnt{res}  )   \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res'}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{fold} \, \ottsym{(}  \ottnt{res\_term}  \ottsym{)}  \Leftarrow  { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{%
{\ottdrulename{Ty\_Res\_Fold}}{}%
}}

\newcommand{\ottdefnTyXXRes}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res}$}{}
\ottusedrule{\ottdruleTyXXResXXEmp{}}
\ottusedrule{\ottdruleTyXXResXXPointsTo{}}
\ottusedrule{\ottdruleTyXXResXXVar{}}
\ottusedrule{\ottdruleTyXXResXXSepConj{}}
\ottusedrule{\ottdruleTyXXResXXConj{}}
\ottusedrule{\ottdruleTyXXResXXPack{}}
\ottusedrule{\ottdruleTyXXResXXFold{}}
\end{ottdefnblock}}

%% defn Heap
\newcommand{\ottdruleTyXXHeapXXEmp}[1]{\ottdrule[#1]{%
}{
\cdot  {:}  \cdot}{%
{\ottdrulename{Ty\_Heap\_Emp}}{}%
}}


\newcommand{\ottdruleTyXXHeapXXPointsTo}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{h}  {:}  \mathcal{R}}%
\ottpremise{\cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \mathcal{R}'  \vdash  \ottnt{pt}  \Leftarrow  \ottnt{pt}}%
}{
\ottnt{h}  \ottsym{+}  \ottsym{\{}  \ottnt{pt}  \ottsym{\}}  {:}  \mathcal{R}  \ottsym{,}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Heap\_PointsTo}}{}%
}}

\newcommand{\ottdefnTyXXHeap}[1]{\begin{ottdefnblock}[#1]{$\ottnt{h}  {:}  \mathcal{R}$}{}
\ottusedrule{\ottdruleTyXXHeapXXEmp{}}
\ottusedrule{\ottdruleTyXXHeapXXPointsTo{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsresXXjtype}{
\ottdefnTyXXResXXEq{}\ottdefnTyXXRes{}\ottdefnTyXXHeap{}}

% defns object_value_jtype
%% defn Pval_Obj_
\newcommand{\ottdruleTyXXPvalXXObjXXInt}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  mem\_int  \Rightarrow \, \ottkw{obj} \, \ottkw{integer}}{%
{\ottdrulename{Ty\_Pval\_Obj\_Int}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXObjXXPtr}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  mem\_ptr  \Rightarrow \, \ottkw{obj} \, \ottkw{loc}}{%
{\ottdrulename{Ty\_Pval\_Obj\_Ptr}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXObjXXArr}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  loaded\_value_{\ottmv{i}}  \Rightarrow  \beta}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{array} \, \ottsym{(} \, \ottcomp{loaded\_value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \Rightarrow \, \ottkw{obj} \, \ottkw{array} \, \beta}{%
{\ottdrulename{Ty\_Pval\_Obj\_Arr}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXObjXXStruct}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{struct} \, tag  \ \& \, \ottcomp{member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}}{\ottmv{i}} \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  mem\_val_{\ottmv{i}}  \Rightarrow \, \ottkw{mem} \,  \beta_{  \tau_{\ottmv{i}}  } }{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottsym{(} \, \ottkw{struct} \, tag  \ottsym{)}  \ottsym{\{} \, \ottcomp{. \, member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}  =  mem\_val_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\}}  \Rightarrow \, \ottkw{obj} \, \ottkw{struct} \, tag}{%
{\ottdrulename{Ty\_Pval\_Obj\_Struct}}{}%
}}

\newcommand{\ottdefnTyXXPvalXXObjXX}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  object\_value  \Rightarrow \, \ottkw{obj} \, \beta$}{}
\ottusedrule{\ottdruleTyXXPvalXXObjXXInt{}}
\ottusedrule{\ottdruleTyXXPvalXXObjXXPtr{}}
\ottusedrule{\ottdruleTyXXPvalXXObjXXArr{}}
\ottusedrule{\ottdruleTyXXPvalXXObjXXStruct{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsobjectXXvalueXXjtype}{
\ottdefnTyXXPvalXXObjXX{}}

% defns pval_jtype
%% defn Pval
\newcommand{\ottdruleTyXXPvalXXVarXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x}  {:}  \beta \, \in \, \mathcal{C}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottmv{x}  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Var\_Comp}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXVarXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x}  {:}  \beta \, \in \, \mathcal{L}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottmv{x}  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Var\_Log}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXObj}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  object\_value  \Rightarrow \, \ottkw{obj} \, \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  object\_value  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Obj}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXLoaded}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  object\_value  \Rightarrow \, \ottkw{obj} \, \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{specified} \, object\_value  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Loaded}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXUnit}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Unit}  \Rightarrow  \ottkw{unit}}{%
{\ottdrulename{Ty\_Pval\_Unit}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXTrue}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{True}  \Rightarrow  \ottkw{bool}}{%
{\ottdrulename{Ty\_Pval\_True}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXFalse}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{False}  \Rightarrow  \ottkw{bool}}{%
{\ottdrulename{Ty\_Pval\_False}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXList}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  value_{\ottmv{i}}  \Rightarrow  \beta}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \beta  \ottsym{[} \, \ottcomp{value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{]}  \Rightarrow  \ottkw{list} \, \beta}{%
{\ottdrulename{Ty\_Pval\_List}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXTuple}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  value_{\ottmv{i}}  \Rightarrow  \beta_{\ottmv{i}}}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottsym{(} \, \ottcomp{value_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \Rightarrow  \ottcomp{\beta_{\ottmv{i}}}{\ottmv{i}}}{%
{\ottdrulename{Ty\_Pval\_Tuple}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXError}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottkw{false}  \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{error} \, \ottsym{(}  string  \ottsym{,}  pval  \ottsym{)}  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Error}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXCtorXXNil}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Nil} \, \beta  \ottsym{(}  \,  \ottsym{)}  \Rightarrow  \ottkw{list} \, \beta}{%
{\ottdrulename{Ty\_Pval\_Ctor\_Nil}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXCtorXXCons}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{list} \, \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Cons}  \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  \Rightarrow  \ottkw{list} \, \beta}{%
{\ottdrulename{Ty\_Pval\_Ctor\_Cons}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXCtorXXTuple}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{\ottmv{i}}  \Rightarrow  \beta_{\ottmv{i}}}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Tuple}  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \Rightarrow  \ottcomp{\beta_{\ottmv{i}}}{\ottmv{i}}}{%
{\ottdrulename{Ty\_Pval\_Ctor\_Tuple}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXCtorXXArray}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{\ottmv{i}}  \Rightarrow  \beta}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Array}  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \Rightarrow  \ottkw{array} \, \beta}{%
{\ottdrulename{Ty\_Pval\_Ctor\_Array}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXCtorXXSpecified}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{Specified}  \ottsym{(}  pval  \ottsym{)}  \Rightarrow  \beta}{%
{\ottdrulename{Ty\_Pval\_Ctor\_Specified}}{}%
}}


\newcommand{\ottdruleTyXXPvalXXStruct}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{struct} \, tag  \ \& \, \ottcomp{member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}}{\ottmv{i}} \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{\ottmv{i}}  \Rightarrow   \beta_{  \tau_{\ottmv{i}}  } }{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottsym{(} \, \ottkw{struct} \, tag  \ottsym{)}  \ottsym{\{} \, \ottcomp{. \, member_{\ottmv{i}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\}}  \Rightarrow  \ottkw{struct} \, tag}{%
{\ottdrulename{Ty\_Pval\_Struct}}{}%
}}

\newcommand{\ottdefnTyXXPval}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta$}{}
\ottusedrule{\ottdruleTyXXPvalXXVarXXComp{}}
\ottusedrule{\ottdruleTyXXPvalXXVarXXLog{}}
\ottusedrule{\ottdruleTyXXPvalXXObj{}}
\ottusedrule{\ottdruleTyXXPvalXXLoaded{}}
\ottusedrule{\ottdruleTyXXPvalXXUnit{}}
\ottusedrule{\ottdruleTyXXPvalXXTrue{}}
\ottusedrule{\ottdruleTyXXPvalXXFalse{}}
\ottusedrule{\ottdruleTyXXPvalXXList{}}
\ottusedrule{\ottdruleTyXXPvalXXTuple{}}
\ottusedrule{\ottdruleTyXXPvalXXError{}}
\ottusedrule{\ottdruleTyXXPvalXXCtorXXNil{}}
\ottusedrule{\ottdruleTyXXPvalXXCtorXXCons{}}
\ottusedrule{\ottdruleTyXXPvalXXCtorXXTuple{}}
\ottusedrule{\ottdruleTyXXPvalXXCtorXXArray{}}
\ottusedrule{\ottdruleTyXXPvalXXCtorXXSpecified{}}
\ottusedrule{\ottdruleTyXXPvalXXStruct{}}
\end{ottdefnblock}}


\newcommand{\ottdefnspvalXXjtype}{
\ottdefnTyXXPval{}}

% defns spine_jtype
%% defn Spine
\newcommand{\ottdruleTyXXSpineXXEmpty}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \,  \mathbin{ {:} {:} }  \ottnt{ret}  \gg  \cdot  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Ty\_Spine\_Empty}}{}%
}}


\newcommand{\ottdruleTyXXSpineXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottmv{x}  =  pval  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \Pi \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \gg  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Ty\_Spine\_Comp}}{}%
}}


\newcommand{\ottdruleTyXXSpineXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottmv{x}  =  pval  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \forall \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \gg  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Ty\_Spine\_Log}}{}%
}}


\newcommand{\ottdruleTyXXSpineXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{R}_{{\mathrm{2}}}  \vdash  \ottmv{x}  =  \ottnt{res\_term}  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{res}  \multimap  \ottnt{arg}  \gg  \ottnt{res\_term}  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Ty\_Spine\_Res}}{}%
}}


\newcommand{\ottdruleTyXXSpineXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  term  \supset  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Ty\_Spine\_Phi}}{}%
}}

\newcommand{\ottdefnTyXXSpine}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXSpineXXEmpty{}}
\ottusedrule{\ottdruleTyXXSpineXXComp{}}
\ottusedrule{\ottdruleTyXXSpineXXLog{}}
\ottusedrule{\ottdruleTyXXSpineXXRes{}}
\ottusedrule{\ottdruleTyXXSpineXXPhi{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsspineXXjtype}{
\ottdefnTyXXSpine{}}

% defns pexpr_jtype
%% defn PE
\newcommand{\ottdruleTyXXPEXXVal}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottmv{y}  {:}  \beta  . \:  \ottmv{y}  =   pval }{%
{\ottdrulename{Ty\_PE\_Val}}{}%
}}


\newcommand{\ottdruleTyXXPEXXArrayXXShift}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{array\_shift} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \ottkw{loc}  . \:  \ottmv{y}  =   pval_{{\mathrm{1}}}   \mathbin{ {+}_{ \mathrm{ptr} } }  \ottsym{(}   pval_{{\mathrm{2}}}   \times   \mathrm{size\_of}(  \tau  )   \ottsym{)}}{%
{\ottdrulename{Ty\_PE\_Array\_Shift}}{}%
}}


\newcommand{\ottdruleTyXXPEXXMemberXXShift}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{loc}}%
\ottpremise{\ottkw{struct} \, tag  \ \& \, \ottcomp{member_{\ottmv{i}}  {:}  \tau_{\ottmv{i}}}{\ottmv{i}} \, \in \, \ottkw{Globals}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{member\_shift} \, \ottsym{(}  pval  \ottsym{,}  tag  \ottsym{,}  member_{\ottmv{j}}  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \ottkw{loc}  . \:  \ottmv{y}  =   pval   \mathbin{ {+}_{ \mathrm{ptr} } }   \mathrm{offset\_of}_{  tag  }(  member_{\ottmv{j}}  ) }{%
{\ottdrulename{Ty\_PE\_Member\_Shift}}{}%
}}


\newcommand{\ottdruleTyXXPEXXNot}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{bool}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{not} \, \ottsym{(}  pval  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \neg \,  pval }{%
{\ottdrulename{Ty\_PE\_Not}}{}%
}}


\newcommand{\ottdruleTyXXPEXXArithXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{integer}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}} \, \mathbin{ binop_{arith} } \, pval_{{\mathrm{2}}}  \Rightarrow  \ottmv{y}  {:}  \ottkw{integer}  . \:  \ottmv{y}  =  \ottsym{(}    pval_{{\mathrm{1}}}    \mathbin{ binop_{arith} }    pval_{{\mathrm{2}}}    \ottsym{)}}{%
{\ottdrulename{Ty\_PE\_Arith\_Binop}}{}%
}}


\newcommand{\ottdruleTyXXPEXXRelXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{integer}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}} \, \mathbin{ binop_{rel} } \, pval_{{\mathrm{2}}}  \Rightarrow  \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \ottsym{(}    pval_{{\mathrm{1}}}    \mathbin{ binop_{rel} }    pval_{{\mathrm{2}}}    \ottsym{)}}{%
{\ottdrulename{Ty\_PE\_Rel\_Binop}}{}%
}}


\newcommand{\ottdruleTyXXPEXXBoolXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{bool}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{bool}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}} \, \mathbin{ binop_{bool} } \, pval_{{\mathrm{2}}}  \Rightarrow  \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \ottsym{(}    pval_{{\mathrm{1}}}    \mathbin{ binop_{bool} }    pval_{{\mathrm{2}}}    \ottsym{)}}{%
{\ottdrulename{Ty\_PE\_Bool\_Binop}}{}%
}}


\newcommand{\ottdruleTyXXPEXXCall}[1]{\ottdrule[#1]{%
\ottpremise{name  {:}  \ottnt{pure\_arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  tpexpr \, \in \, \ottkw{Globals}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{pure\_arg}  \gg  \sigma  \ottsym{;}  \Sigma \, \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \wedge  \ottkw{I}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  name  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \beta  . \:   \sigma  (  \ottnt{term}  ) }{%
{\ottdrulename{Ty\_PE\_Call}}{}%
}}


\newcommand{\ottdruleTyXXPEXXAssertXXUndef}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{bool}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval   \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{assert\_undef} \, \ottsym{(}  pval  \ottsym{,}   \, \ottmv{UB\_name}  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \ottkw{unit}  . \:  \ottmv{y}  =  \ottkw{unit}}{%
{\ottdrulename{Ty\_PE\_Assert\_Undef}}{}%
}}


\newcommand{\ottdruleTyXXPEXXBoolXXToXXInteger}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{bool}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{bool\_to\_integer} \, \ottsym{(}  pval  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \ottkw{integer}  . \:  \ottmv{y}  =  \ottkw{if} \,  pval  \, \ottkw{then} \,  1  \, \ottkw{else} \,  0 }{%
{\ottdrulename{Ty\_PE\_Bool\_To\_Integer}}{}%
}}


\newcommand{\ottdruleTyXXPEXXWrapI}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{integer}}%
\ottpremise{\ottmv{abbrev_{{\mathrm{1}}}} \, \equiv \,  \mathrm{max\_int}_{  \tau  }   \ottsym{-}   \mathrm{min\_int}_{  \tau  }   \ottsym{+}   1 }%
\ottpremise{\ottmv{abbrev_{{\mathrm{2}}}} \, \equiv \,  pval  \, \ottkw{rem\_f} \, \ottmv{abbrev_{{\mathrm{1}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{wrapI} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{)}  \Rightarrow  \ottmv{y}  {:}  \beta  . \:  \ottmv{y}  =  \ottkw{if} \, \ottmv{abbrev_{{\mathrm{2}}}}  \leq   \mathrm{max\_int}_{  \tau  }  \, \ottkw{then} \, \ottmv{abbrev_{{\mathrm{2}}}} \, \ottkw{else} \, \ottmv{abbrev_{{\mathrm{2}}}}  \ottsym{-}  \ottmv{abbrev_{{\mathrm{1}}}}}{%
{\ottdrulename{Ty\_PE\_WrapI}}{}%
}}

\newcommand{\ottdefnTyXXPE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pexpr  \Rightarrow  \ottmv{ident}  {:}  \beta  . \:  term$}{}
\ottusedrule{\ottdruleTyXXPEXXVal{}}
\ottusedrule{\ottdruleTyXXPEXXArrayXXShift{}}
\ottusedrule{\ottdruleTyXXPEXXMemberXXShift{}}
\ottusedrule{\ottdruleTyXXPEXXNot{}}
\ottusedrule{\ottdruleTyXXPEXXArithXXBinop{}}
\ottusedrule{\ottdruleTyXXPEXXRelXXBinop{}}
\ottusedrule{\ottdruleTyXXPEXXBoolXXBinop{}}
\ottusedrule{\ottdruleTyXXPEXXCall{}}
\ottusedrule{\ottdruleTyXXPEXXAssertXXUndef{}}
\ottusedrule{\ottdruleTyXXPEXXBoolXXToXXInteger{}}
\ottusedrule{\ottdruleTyXXPEXXWrapI{}}
\end{ottdefnblock}}


\newcommand{\ottdefnspexprXXjtype}{
\ottdefnTyXXPE{}}

% defns comp_pattern_jtype
%% defn Comp_
\newcommand{\ottdruleTyXXPatXXCompXXNoXXSymXXAnnot}[1]{\ottdrule[#1]{%
}{
\ottmv{\_}  {:}  \beta  {:}  \beta  \leadsto  \cdot \, \ottkw{with} \, \ottmv{\_}}{%
{\ottdrulename{Ty\_Pat\_Comp\_No\_Sym\_Annot}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXSymXXAnnot}[1]{\ottdrule[#1]{%
}{
\ottmv{x}  {:}  \beta  {:}  \beta  \leadsto  \cdot  \ottsym{,}  \ottmv{x}  {:}  \beta \, \ottkw{with} \, \ottmv{x}}{%
{\ottdrulename{Ty\_Pat\_Comp\_Sym\_Annot}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXNil}[1]{\ottdrule[#1]{%
}{
\ottkw{Nil} \, \beta  \ottsym{(}  \,  \ottsym{)}  {:}  \ottkw{list} \, \beta  \leadsto  \cdot \, \ottkw{with} \, \ottkw{nil}}{%
{\ottdrulename{Ty\_Pat\_Comp\_Nil}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXCons}[1]{\ottdrule[#1]{%
\ottpremise{pattern_{{\mathrm{1}}}  {:}  \beta  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term_{{\mathrm{1}}}}%
\ottpremise{pattern_{{\mathrm{2}}}  {:}  \ottkw{list} \, \beta  \leadsto  \mathcal{C}_{{\mathrm{2}}} \, \ottkw{with} \, term_{{\mathrm{2}}}}%
}{
\ottkw{Cons}  \ottsym{(}  pattern_{{\mathrm{1}}}  \ottsym{,}  pattern_{{\mathrm{2}}}  \ottsym{)}  {:}  \ottkw{list} \, \beta  \leadsto  \mathcal{C}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{C}_{{\mathrm{2}}} \, \ottkw{with} \,  term_{{\mathrm{1}}}  ::  term_{{\mathrm{2}}} }{%
{\ottdrulename{Ty\_Pat\_Comp\_Cons}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXTuple}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  {:}  \beta_{\ottmv{i}}  \leadsto  \mathcal{C}_{\ottmv{i}} \, \ottkw{with} \, term_{\ottmv{i}}}{\ottmv{i}}}%
}{
\ottkw{Tuple}  \ottsym{(} \, \ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  {:}  \ottcomp{\beta_{\ottmv{i}}}{\ottmv{i}}  \leadsto  \ottcomp{\mathcal{C}_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{with} \, \ottsym{(} \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Comp\_Tuple}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXArray}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  {:}  \beta  \leadsto  \mathcal{C}_{\ottmv{i}} \, \ottkw{with} \, term_{\ottmv{i}}}{\ottmv{i}}}%
}{
\ottkw{Array}  \ottsym{(} \, \ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  {:}  \ottkw{array} \, \beta  \leadsto  \ottcomp{\mathcal{C}_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{with} \, \ottsym{[}  \mid \, \ottcomp{term_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{\mbox{$\mid$}]}}{%
{\ottdrulename{Ty\_Pat\_Comp\_Array}}{}%
}}


\newcommand{\ottdruleTyXXPatXXCompXXSpecified}[1]{\ottdrule[#1]{%
\ottpremise{pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}%
}{
\ottkw{Specified}  \ottsym{(}  pattern  \ottsym{)}  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}{%
{\ottdrulename{Ty\_Pat\_Comp\_Specified}}{}%
}}

\newcommand{\ottdefnTyXXPatXXCompXX}[1]{\begin{ottdefnblock}[#1]{$pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term$}{}
\ottusedrule{\ottdruleTyXXPatXXCompXXNoXXSymXXAnnot{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXSymXXAnnot{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXNil{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXCons{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXTuple{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXArray{}}
\ottusedrule{\ottdruleTyXXPatXXCompXXSpecified{}}
\end{ottdefnblock}}

%% defn Sym_Or_Pattern
\newcommand{\ottdruleTyXXPatXXSymXXOrXXPatternXXSym}[1]{\ottdrule[#1]{%
}{
\ottmv{x}  {:}  \beta  \leadsto  \cdot  \ottsym{,}  \ottmv{x}  {:}  \beta \, \ottkw{with} \, \ottmv{x}}{%
{\ottdrulename{Ty\_Pat\_Sym\_Or\_Pattern\_Sym}}{}%
}}


\newcommand{\ottdruleTyXXPatXXSymXXOrXXPatternXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}%
}{
pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term}{%
{\ottdrulename{Ty\_Pat\_Sym\_Or\_Pattern\_Pattern}}{}%
}}

\newcommand{\ottdefnTyXXPatXXSymXXOrXXPattern}[1]{\begin{ottdefnblock}[#1]{$ident\_or\_pattern  {:}  \beta  \leadsto  \mathcal{C} \, \ottkw{with} \, term$}{}
\ottusedrule{\ottdruleTyXXPatXXSymXXOrXXPatternXXSym{}}
\ottusedrule{\ottdruleTyXXPatXXSymXXOrXXPatternXXPattern{}}
\end{ottdefnblock}}


\newcommand{\ottdefnscompXXpatternXXjtype}{
\ottdefnTyXXPatXXCompXX{}\ottdefnTyXXPatXXSymXXOrXXPattern{}}

% defns res_pattern_jtype
%% defn Res_StripIfs_
\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXEmpty}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottkw{emp}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottkw{emp}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_Empty}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXPointsTo}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottnt{pt}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{pt}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_PointsTo}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXSepConj}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_SepConj}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXExists}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \exists \, \ottmv{x}  {:}  \beta  . \:  \ottnt{res}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \exists \, \ottmv{x}  {:}  \beta  . \:  \ottnt{res}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_Exists}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXTermConj}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  term  \wedge  \ottnt{res}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  term  \wedge  \ottnt{res}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_TermConj}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXTrue}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res'_{{\mathrm{1}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res'_{{\mathrm{1}}}}  \ottsym{)}}%
}{
\Phi  \vdash  \ottnt{res'_{{\mathrm{1}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottkw{if} \, term \, \ottkw{then} \, \ottnt{res_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_True}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXFalse}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \neg \, term  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res'_{{\mathrm{2}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}%
}{
\Phi  \vdash  \ottnt{res'_{{\mathrm{2}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottkw{if} \, term \, \ottkw{then} \, \ottnt{res_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_False}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXUnderDet}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottkw{if} \, term \, \ottkw{then} \, \ottnt{res_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{2}}}}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottkw{if} \, term \, \ottkw{then} \, \ottnt{res_{{\mathrm{1}}}} \, \ottkw{else} \, \ottnt{res_{{\mathrm{2}}}}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_UnderDet}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXStripIfsXXPred}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \ottsym{)}}{%
{\ottdrulename{Ty\_Pat\_Res\_StripIfs\_Pred}}{}%
}}

\newcommand{\ottdefnTyXXPatXXResXXStripIfsXX}[1]{\begin{ottdefnblock}[#1]{$\Phi  \vdash  \ottnt{res'}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res}  \ottsym{)}$}{}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXEmpty{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXPointsTo{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXSepConj{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXExists{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXTermConj{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXTrue{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXFalse{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXUnderDet{}}
\ottusedrule{\ottdruleTyXXPatXXResXXStripIfsXXPred{}}
\end{ottdefnblock}}

%% defn Res_Match_
\newcommand{\ottdruleTyXXPatXXResXXMatchXXEmpty}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottkw{emp} \, \ottkw{as} \, \ottkw{emp}  \leadsto  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_Empty}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXMatchXXVar}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \ottnt{res} \, \ottkw{as} \, \ottmv{r}  \leadsto  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{,}  \ottmv{r}  {:}  \ottnt{res}}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_Var}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXMatchXXSepConj}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern_{{\mathrm{1}}}}  {:}  \ottnt{res_{{\mathrm{1}}}}  \leadsto  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}}%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern_{{\mathrm{2}}}}  {:}  \ottnt{res_{{\mathrm{2}}}}  \leadsto  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}}%
}{
\Phi  \vdash  \ottnt{res_{{\mathrm{1}}}}  *  \ottnt{res_{{\mathrm{2}}}} \, \ottkw{as} \, \langle  \ottnt{res\_pattern_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_pattern_{{\mathrm{2}}}}  \rangle  \leadsto  \mathcal{L}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{,}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{R}_{{\mathrm{2}}}}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_SepConj}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXMatchXXConj}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern}  {:}  \ottnt{res}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash  term  \wedge  \ottnt{res} \, \ottkw{as} \, \ottnt{res\_pattern}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{,}  term  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_Conj}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXMatchXXPack}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern}  {:}   \ottmv{x}  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{res}  )   \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash  \exists \, \ottmv{y}  {:}  \beta  . \:  \ottnt{res} \, \ottkw{as} \, \ottkw{pack} \, \ottsym{(}  \ottmv{x}  \ottsym{,}  \ottnt{res\_pattern}  \ottsym{)}  \leadsto  \mathcal{L}'  \ottsym{,}  \ottmv{x}  {:}  \beta  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_Pack}}{}%
}}


\newcommand{\ottdruleTyXXPatXXResXXMatchXXFold}[1]{\ottdrule[#1]{%
\ottpremise{{ \alpha } \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}  {:}  \beta_{\ottmv{i}}}{\ottmv{i}} \, \mapsto  \ottnt{res} \, \in \, \ottkw{Globals}}%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern}  {:}   \ottcomp{pval_{\ottmv{i}}  \ottsym{/}  \ottmv{x_{\ottmv{i}}}  \ottsym{,}  \cdot}{\ottmv{i}}  (  \ottnt{res}  )   \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash  { \alpha }  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)} \, \ottkw{as} \, \ottkw{fold} \, \ottsym{(}  \ottnt{res\_pattern}  \ottsym{)}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Res\_Match\_Fold}}{}%
}}

\newcommand{\ottdefnTyXXPatXXResXXMatchXX}[1]{\begin{ottdefnblock}[#1]{$\Phi  \vdash  \ottnt{res} \, \ottkw{as} \, \ottnt{res\_pattern}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'$}{}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXEmpty{}}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXVar{}}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXSepConj{}}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXConj{}}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXPack{}}
\ottusedrule{\ottdruleTyXXPatXXResXXMatchXXFold{}}
\end{ottdefnblock}}

%% defn Res_
\newcommand{\ottdruleTyXXPatXXResXXStripXXIfs}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res'}  = \, \ottkw{strip\_ifs} \, \ottsym{(}  \ottnt{res}  \ottsym{)}}%
\ottpremise{\Phi  \vdash  \ottnt{res'} \, \ottkw{as} \, \ottnt{res\_pattern}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash  \ottnt{res\_pattern}  {:}  \ottnt{res}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Res\_Strip\_Ifs}}{}%
}}

\newcommand{\ottdefnTyXXPatXXResXX}[1]{\begin{ottdefnblock}[#1]{$\Phi  \vdash  \ottnt{res\_pattern}  {:}  \ottnt{res}  \leadsto  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'$}{}
\ottusedrule{\ottdruleTyXXPatXXResXXStripXXIfs{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsresXXpatternXXjtype}{
\ottdefnTyXXPatXXResXXStripIfsXX{}\ottdefnTyXXPatXXResXXMatchXX{}\ottdefnTyXXPatXXResXX{}}

% defns ret_pattern_jtype
%% defn Ret_
\newcommand{\ottdruleTyXXPatXXRetXXEmpty}[1]{\ottdrule[#1]{%
}{
\Phi  \vdash  \,  {:}  \ottkw{I}  \leadsto  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot  \ottsym{;}  \cdot}{%
{\ottdrulename{Ty\_Pat\_Ret\_Empty}}{}%
}}


\newcommand{\ottdruleTyXXPatXXRetXXComp}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  {:}  \beta  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term_{{\mathrm{1}}}}%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}   term_{{\mathrm{1}}}  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{ret}  )   \leadsto  \mathcal{C}_{{\mathrm{2}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}}%
}{
\Phi  \vdash  \ottkw{comp} \, ident\_or\_pattern  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \Sigma \, \ottmv{y}  {:}  \beta  . \:  \ottnt{ret}  \leadsto  \mathcal{C}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{C}_{{\mathrm{2}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}}{%
{\ottdrulename{Ty\_Pat\_Ret\_Comp}}{}%
}}


\newcommand{\ottdruleTyXXPatXXRetXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash  \ottkw{log} \, \ottmv{y}  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \exists \, \ottmv{y}  {:}  \beta  . \:  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{,}  \ottmv{y}  {:}  \beta  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Ret\_Log}}{}%
}}


\newcommand{\ottdruleTyXXPatXXRetXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash  \ottnt{res\_pattern}  {:}  \ottnt{res}  \leadsto  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}}%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  \leadsto  \mathcal{C}_{{\mathrm{2}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}}%
}{
\Phi  \vdash  \texttt{res} \, \ottnt{res\_pattern}  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{res}  \otimes  \ottnt{ret}  \leadsto  \mathcal{C}_{{\mathrm{2}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{L}_{{\mathrm{2}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{,}  \Phi_{{\mathrm{2}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{R}_{{\mathrm{2}}}}{%
{\ottdrulename{Ty\_Pat\_Ret\_Res}}{}%
}}


\newcommand{\ottdruleTyXXPatXXRetXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'}%
}{
\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  term  \wedge  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{,}  term  \ottsym{;}  \mathcal{R}'}{%
{\ottdrulename{Ty\_Pat\_Ret\_Phi}}{}%
}}

\newcommand{\ottdefnTyXXPatXXRetXX}[1]{\begin{ottdefnblock}[#1]{$\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  \leadsto  \mathcal{C}'  \ottsym{;}  \mathcal{L}'  \ottsym{;}  \Phi'  \ottsym{;}  \mathcal{R}'$}{}
\ottusedrule{\ottdruleTyXXPatXXRetXXEmpty{}}
\ottusedrule{\ottdruleTyXXPatXXRetXXComp{}}
\ottusedrule{\ottdruleTyXXPatXXRetXXLog{}}
\ottusedrule{\ottdruleTyXXPatXXRetXXRes{}}
\ottusedrule{\ottdruleTyXXPatXXRetXXPhi{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsretXXpatternXXjtype}{
\ottdefnTyXXPatXXRetXX{}}

% defns tpval_jtype
%% defn TPVal
\newcommand{\ottdruleTyXXTPValXXUndef}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottkw{false}  \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{undef} \,  \, \ottmv{UB\_name}  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  term}{%
{\ottdrulename{Ty\_TPVal\_Undef}}{}%
}}


\newcommand{\ottdruleTyXXTPValXXDone}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{term}  )   \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{done} \, pval  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}{%
{\ottdrulename{Ty\_TPVal\_Done}}{}%
}}

\newcommand{\ottdefnTyXXTPVal}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpval  \Leftarrow  \ottmv{ident}  {:}  \beta  . \:  term$}{}
\ottusedrule{\ottdruleTyXXTPValXXUndef{}}
\ottusedrule{\ottdruleTyXXTPValXXDone{}}
\end{ottdefnblock}}


\newcommand{\ottdefnstpvalXXjtype}{
\ottdefnTyXXTPVal{}}

% defns tpexpr_jtype
%% defn TPE
\newcommand{\ottdruleTyXXTPEXXIf}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{bool}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   pval   =  \ottkw{true}  \vdash  tpexpr_{{\mathrm{1}}}  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   pval   =  \ottkw{false}  \vdash  tpexpr_{{\mathrm{2}}}  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{if} \, pval \, \ottkw{then} \, tpexpr_{{\mathrm{1}}} \, \ottkw{else} \, tpexpr_{{\mathrm{2}}}  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}{%
{\ottdrulename{Ty\_TPE\_If}}{}%
}}


\newcommand{\ottdruleTyXXTPEXXLet}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pexpr  \Rightarrow  \ottmv{y_{{\mathrm{1}}}}  {:}  \beta_{{\mathrm{1}}}  . \:  \ottnt{term_{{\mathrm{1}}}}}%
\ottpremise{ident\_or\_pattern  {:}  \beta_{{\mathrm{1}}}  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   term  \ottsym{/}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,}  \cdot  (  \ottnt{term_{{\mathrm{1}}}}  )   \vdash  tpexpr  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, tpexpr  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_TPE\_Let}}{}%
}}


\newcommand{\ottdruleTyXXTPEXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpexpr_{{\mathrm{1}}}  \Leftarrow  \ottmv{y_{{\mathrm{1}}}}  {:}  \beta_{{\mathrm{1}}}  . \:  \ottnt{term_{{\mathrm{1}}}}}%
\ottpremise{ident\_or\_pattern  {:}  \beta_{{\mathrm{1}}}  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   term  \ottsym{/}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,}  \cdot  (  \ottnt{term_{{\mathrm{1}}}}  )   \vdash  tpexpr  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  {:}  \beta_{{\mathrm{1}}}  . \:  \ottnt{term_{{\mathrm{1}}}}  \ottsym{)}  =  tpexpr_{{\mathrm{1}}} \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_TPE\_LetT}}{}%
}}


\newcommand{\ottdruleTyXXTPEXXCase}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta_{{\mathrm{1}}}}%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  {:}  \beta_{{\mathrm{1}}}  \leadsto  \mathcal{C}_{\ottmv{i}} \, \ottkw{with} \, term_{\ottmv{i}}}{\ottmv{i}}}%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{,}  \mathcal{C}_{\ottmv{i}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}  term_{\ottmv{i}}  =   pval   \vdash  tpexpr_{\ottmv{i}}  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  \ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  pattern_{\ottmv{i}}  \Rightarrow  tpexpr_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}  \Leftarrow  \ottmv{y_{{\mathrm{2}}}}  {:}  \beta_{{\mathrm{2}}}  . \:  \ottnt{term_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_TPE\_Case}}{}%
}}

\newcommand{\ottdefnTyXXTPE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpexpr  \Leftarrow  \ottmv{ident}  {:}  \beta  . \:  term$}{}
\ottusedrule{\ottdruleTyXXTPEXXIf{}}
\ottusedrule{\ottdruleTyXXTPEXXLet{}}
\ottusedrule{\ottdruleTyXXTPEXXLetT{}}
\ottusedrule{\ottdruleTyXXTPEXXCase{}}
\end{ottdefnblock}}


\newcommand{\ottdefnstpexprXXjtype}{
\ottdefnTyXXTPE{}}

% defns action_jtype
%% defn Action
\newcommand{\ottdruleTyXXActionXXCreate}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{create} \, \ottsym{(}  pval  \ottsym{,}  \tau  \ottsym{)}    \Rightarrow  \Sigma \, { y_p }  {:}  \ottkw{loc}  . \:  \ottkw{representable} \, \ottsym{(}  \tau  *  \ottsym{,}  { y_p }  \ottsym{)}  \wedge  \ottkw{alignedI} \, \ottsym{(}   pval   \ottsym{,}  { y_p }  \ottsym{)}  \wedge  \exists \, \ottmv{y}  {:}   \beta_{  \tau  }   . \:    { y_p }  \mathbin{ { \overset{   {  \times  }   }{ \mapsto } }_{  \tau  } }  \ottmv{y}    \otimes  \ottkw{I}}{%
{\ottdrulename{Ty\_Action\_Create}}{}%
}}


\newcommand{\ottdruleTyXXActionXXLoad}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{0}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval_{{\mathrm{0}}}   =   pval_{{\mathrm{1}}}   \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval_{{\mathrm{2}}}    \Leftarrow    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval_{{\mathrm{2}}}  }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{load} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{0}}}  \ottsym{,}  \_  \ottsym{,}    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval_{{\mathrm{2}}}    \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}   \beta_{  \tau  }   . \:  \ottmv{y}  =   pval_{{\mathrm{2}}}   \wedge     pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval_{{\mathrm{2}}}     \otimes  \ottkw{I}}{%
{\ottdrulename{Ty\_Action\_Load}}{}%
}}


\newcommand{\ottdruleTyXXActionXXStore}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{0}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow   \beta_{  \tau  } }%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottkw{representable} \, \ottsym{(}  \tau  \ottsym{,}   pval_{{\mathrm{1}}}   \ottsym{)}  \ottsym{)}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval_{{\mathrm{2}}}   =   pval_{{\mathrm{0}}}   \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash    pval_{{\mathrm{2}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \Leftarrow    pval_{{\mathrm{2}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_ }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{store} \, \ottsym{(}  \_  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{0}}}  \ottsym{,}  pval_{{\mathrm{1}}}  \ottsym{,}  \_  \ottsym{,}    pval_{{\mathrm{2}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{\_}  {:}  \ottkw{unit}  . \:     pval_{{\mathrm{2}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval_{{\mathrm{1}}}     \otimes  \ottkw{I}}{%
{\ottdrulename{Ty\_Action\_Store}}{}%
}}


\newcommand{\ottdruleTyXXActionXXKillXXStatic}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{0}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval_{{\mathrm{0}}}   =   pval_{{\mathrm{1}}}   \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash    pval_{{\mathrm{1}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \Leftarrow    pval_{{\mathrm{1}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_ }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{kill} \, \ottsym{(}  \ottkw{static} \, \tau  \ottsym{,}  pval_{{\mathrm{0}}}  \ottsym{,}    pval_{{\mathrm{1}}}   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{\_}  {:}  \ottkw{unit}  . \:  \ottkw{I}}{%
{\ottdrulename{Ty\_Action\_Kill\_Static}}{}%
}}

\newcommand{\ottdefnTyXXAction}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_action  \Rightarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXActionXXCreate{}}
\ottusedrule{\ottdruleTyXXActionXXLoad{}}
\ottusedrule{\ottdruleTyXXActionXXStore{}}
\ottusedrule{\ottdruleTyXXActionXXKillXXStatic{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsactionXXjtype}{
\ottdefnTyXXAction{}}

% defns memop_jtype
%% defn Memop
\newcommand{\ottdruleTyXXMemopXXRelXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{loc}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  pval_{{\mathrm{1}}} \, \mathbin{ binop_{rel} } \, pval_{{\mathrm{2}}}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \ottsym{(}    pval_{{\mathrm{1}}}    \mathbin{ binop_{rel} }    pval_{{\mathrm{2}}}    \ottsym{)}  \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_Rel\_Binop}}{}%
}}


\newcommand{\ottdruleTyXXMemopXXIntFromPtr}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{loc}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{intFromPtr} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  pval  \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{integer}  . \:  \ottmv{y}  =  \ottkw{cast\_ptr\_to\_int} \,  pval   \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_IntFromPtr}}{}%
}}


\newcommand{\ottdruleTyXXMemopXXPtrFromInt}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{ptrFromInt} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  pval  \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{loc}  . \:  \ottmv{y}  =  \ottkw{cast\_int\_to\_ptr} \,  pval   \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_PtrFromInt}}{}%
}}


\newcommand{\ottdruleTyXXMemopXXPtrValidForDeref}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{0}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow   pval_{{\mathrm{1}}}   =   pval_{{\mathrm{0}}}   \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \Leftarrow    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_ }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{ptrValidForDeref} \, \ottsym{(}  \tau  \ottsym{,}  pval_{{\mathrm{0}}}  \ottsym{,}    pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \ottkw{aligned} \, \ottsym{(}  \tau  \ottsym{,}   pval_{{\mathrm{1}}}   \ottsym{)}  \wedge     pval_{{\mathrm{1}}}   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_    \otimes  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_PtrValidForDeref}}{}%
}}


\newcommand{\ottdruleTyXXMemopXXPtrWellAligned}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{loc}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{ptrWellAligned} \, \ottsym{(}  \tau  \ottsym{,}  pval  \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{bool}  . \:  \ottmv{y}  =  \ottkw{aligned} \, \ottsym{(}  \tau  \ottsym{,}   pval   \ottsym{)}  \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_PtrWellAligned}}{}%
}}


\newcommand{\ottdruleTyXXMemopXXPtrArrayShift}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{1}}}  \Rightarrow  \ottkw{loc}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval_{{\mathrm{2}}}  \Rightarrow  \ottkw{integer}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{ptrArrayShift} \, \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  \tau  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  \Rightarrow  \Sigma \, \ottmv{y}  {:}  \ottkw{loc}  . \:  \ottmv{y}  =   pval_{{\mathrm{1}}}   \mathbin{ {+}_{ \mathrm{ptr} } }  \ottsym{(}   pval_{{\mathrm{2}}}   \times   \mathrm{size\_of}(  \tau  )   \ottsym{)}  \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Memop\_PtrArrayShift}}{}%
}}

\newcommand{\ottdefnTyXXMemop}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_op  \Rightarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXMemopXXRelXXBinop{}}
\ottusedrule{\ottdruleTyXXMemopXXIntFromPtr{}}
\ottusedrule{\ottdruleTyXXMemopXXPtrFromInt{}}
\ottusedrule{\ottdruleTyXXMemopXXPtrValidForDeref{}}
\ottusedrule{\ottdruleTyXXMemopXXPtrWellAligned{}}
\ottusedrule{\ottdruleTyXXMemopXXPtrArrayShift{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsmemopXXjtype}{
\ottdefnTyXXMemop{}}

% defns tval_jtype
%% defn TVal
\newcommand{\ottdruleTyXXTValXXI}[1]{\ottdrule[#1]{%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{done} \, \,  \Leftarrow  \ottkw{I}}{%
{\ottdrulename{Ty\_TVal\_I}}{}%
}}


\newcommand{\ottdruleTyXXTValXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \Leftarrow   pval  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{ret}  ) }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, pval  \ottsym{,} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \Leftarrow  \Sigma \, \ottmv{y}  {:}  \beta  . \:  \ottnt{ret}}{%
{\ottdrulename{Ty\_TVal\_Comp}}{}%
}}


\newcommand{\ottdruleTyXXTValXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \Leftarrow   pval  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{ret}  ) }%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, pval  \ottsym{,} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \Leftarrow  \exists \, \ottmv{y}  {:}  \beta  . \:  \ottnt{ret}}{%
{\ottdrulename{Ty\_TVal\_Log}}{}%
}}


\newcommand{\ottdruleTyXXTValXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  term  \ottsym{)}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, \ottnt{spine}  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{done} \, \ottnt{spine}  \Leftarrow  term  \wedge  \ottnt{ret}}{%
{\ottdrulename{Ty\_TVal\_Phi}}{}%
}}


\newcommand{\ottdruleTyXXTValXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \vdash  \ottnt{res\_term}  \Leftarrow  \ottnt{res}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{2}}}  \vdash  \ottkw{done} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}  \ottsym{,}  \mathcal{R}_{{\mathrm{2}}}  \vdash  \ottkw{done} \, \ottnt{res\_term}  \ottsym{,} \, \ottcomp{\ottnt{spine\_elem}}{\ottmv{i}}  \Leftarrow  \ottnt{res}  \otimes  \ottnt{ret}}{%
{\ottdrulename{Ty\_TVal\_Res}}{}%
}}


\newcommand{\ottdruleTyXXTValXXUndef}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{smt} \, \ottsym{(}  \Phi  \Rightarrow  \ottkw{false}  \ottsym{)}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{undef} \,  \, \ottmv{UB\_name}  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_TVal\_Undef}}{}%
}}

\newcommand{\ottdefnTyXXTVal}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  tval  \Leftarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXTValXXI{}}
\ottusedrule{\ottdruleTyXXTValXXComp{}}
\ottusedrule{\ottdruleTyXXTValXXLog{}}
\ottusedrule{\ottdruleTyXXTValXXPhi{}}
\ottusedrule{\ottdruleTyXXTValXXRes{}}
\ottusedrule{\ottdruleTyXXTValXXUndef{}}
\end{ottdefnblock}}


\newcommand{\ottdefnstvalXXjtype}{
\ottdefnTyXXTVal{}}

% defns seq_expr_jtype
%% defn Seq_E
\newcommand{\ottdruleTyXXSeqXXEXXCCall}[1]{\ottdrule[#1]{%
\ottpremise{ident  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{ccall} \, \ottsym{(}  \tau  \ottsym{,}  ident  \ottsym{,}  \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \ottsym{)}  \Rightarrow   \sigma  (  \ottnt{ret}  ) }{%
{\ottdrulename{Ty\_Seq\_E\_CCall}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXEXXProc}[1]{\ottdrule[#1]{%
\ottpremise{name  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{pcall} \, \ottsym{(}  name  \ottsym{,}  \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \ottsym{)}  \Rightarrow   \sigma  (  \ottnt{ret}  ) }{%
{\ottdrulename{Ty\_Seq\_E\_Proc}}{}%
}}

\newcommand{\ottdefnTyXXSeqXXE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_expr  \Rightarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXSeqXXEXXCCall{}}
\ottusedrule{\ottdruleTyXXSeqXXEXXProc{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsseqXXexprXXjtype}{
\ottdefnTyXXSeqXXE{}}

% defns is_expr_jtype
%% defn Is_E
\newcommand{\ottdruleTyXXIsXXEXXMemop}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_op  \Rightarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{memop} \, \ottsym{(}  mem\_op  \ottsym{)}  \Rightarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Is\_E\_Memop}}{}%
}}


\newcommand{\ottdruleTyXXIsXXEXXAction}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_action  \Rightarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash     \, mem\_action  \Rightarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Is\_E\_Action}}{}%
}}


\newcommand{\ottdruleTyXXIsXXEXXNegXXAction}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  mem\_action  \Rightarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash   \texttt{neg}  \, mem\_action  \Rightarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Is\_E\_Neg\_Action}}{}%
}}

\newcommand{\ottdefnTyXXIsXXE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_expr  \Rightarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXIsXXEXXMemop{}}
\ottusedrule{\ottdruleTyXXIsXXEXXAction{}}
\ottusedrule{\ottdruleTyXXIsXXEXXNegXXAction{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsisXXexprXXjtype}{
\ottdefnTyXXIsXXE{}}

% defns texpr_jtype
%% defn Seq_TE
\newcommand{\ottdruleTyXXSeqXXTEXXTVal}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  tval  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  tval  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_TVal}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXLetP}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pexpr  \Rightarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}%
\ottpremise{ident\_or\_pattern  {:}  \beta  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term_{{\mathrm{1}}}}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   term_{{\mathrm{1}}}  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{term}  )   \ottsym{;}  \mathcal{R}  \vdash  texpr  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, texpr  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_LetP}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXLetPT}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  tpexpr  \Leftarrow  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}}%
\ottpremise{ident\_or\_pattern  {:}  \beta  \leadsto  \mathcal{C}_{{\mathrm{1}}} \, \ottkw{with} \, term_{{\mathrm{1}}}}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   term_{{\mathrm{1}}}  \ottsym{/}  \ottmv{y}  \ottsym{,}  \cdot  (  \ottnt{term}  )   \ottsym{;}  \mathcal{R}  \vdash  texpr  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr \, \ottkw{in} \, texpr  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_LetPT}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXLet}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \vdash  seq\_expr  \Rightarrow  \ottnt{ret_{{\mathrm{1}}}}}%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret_{{\mathrm{1}}}}  \leadsto  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{,}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi  \ottsym{,}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}  \ottsym{,}  \mathcal{R}_{{\mathrm{1}}}  \vdash  texpr  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \ottsym{,}  \mathcal{R}  \vdash  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  seq\_expr \, \ottkw{in} \, texpr  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Seq\_TE\_Let}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \vdash  texpr_{{\mathrm{1}}}  \Leftarrow  \ottnt{ret_{{\mathrm{1}}}}}%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret_{{\mathrm{1}}}}  \leadsto  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{,}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi  \ottsym{,}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}  \ottsym{,}  \mathcal{R}_{{\mathrm{1}}}  \vdash  texpr_{{\mathrm{2}}}  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \ottsym{,}  \mathcal{R}  \vdash  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret_{{\mathrm{1}}}}  =  texpr_{{\mathrm{1}}} \, \ottkw{in} \, texpr_{{\mathrm{2}}}  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Seq\_TE\_LetT}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXCase}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \beta_{{\mathrm{1}}}}%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  {:}  \beta_{{\mathrm{1}}}  \leadsto  \mathcal{C}_{\ottmv{i}} \, \ottkw{with} \, term_{\ottmv{i}}}{\ottmv{i}}}%
\ottpremise{\ottcomp{\mathcal{C}  \ottsym{,}  \mathcal{C}_{\ottmv{i}}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}  term_{\ottmv{i}}  =   pval   \ottsym{;}  \mathcal{R}  \vdash  texpr_{\ottmv{i}}  \Leftarrow  \ottnt{ret}}{\ottmv{i}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  pattern_{\ottmv{i}}  \Rightarrow  texpr_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_Case}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXIf}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \vdash  pval  \Rightarrow  \ottkw{bool}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   pval   =  \ottkw{true}  \ottsym{;}  \mathcal{R}  \vdash  texpr_{{\mathrm{1}}}  \Leftarrow  \ottnt{ret}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{,}   pval   =  \ottkw{false}  \ottsym{;}  \mathcal{R}  \vdash  texpr_{{\mathrm{2}}}  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{if} \, pval \, \ottkw{then} \, texpr_{{\mathrm{1}}} \, \ottkw{else} \, texpr_{{\mathrm{2}}}  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_If}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXRun}[1]{\ottdrule[#1]{%
\ottpremise{ident  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottkw{false}  \wedge  \ottkw{I}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \cdot  \vdash  \ottkw{run} \, ident \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}}  \Leftarrow  \ottkw{false}  \wedge  \ottkw{I}}{%
{\ottdrulename{Ty\_Seq\_TE\_Run}}{}%
}}


\newcommand{\ottdruleTyXXSeqXXTEXXBound}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_texpr  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  \ottkw{bound} \, \ottsym{[}  int  \ottsym{]}  \ottsym{(}  is\_texpr  \ottsym{)}  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_Seq\_TE\_Bound}}{}%
}}

\newcommand{\ottdefnTyXXSeqXXTE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_texpr  \Leftarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXSeqXXTEXXTVal{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXLetP{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXLetPT{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXLet{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXLetT{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXCase{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXIf{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXRun{}}
\ottusedrule{\ottdruleTyXXSeqXXTEXXBound{}}
\end{ottdefnblock}}

%% defn Is_TE
\newcommand{\ottdruleTyXXIsXXTEXXLetS}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \vdash  is\_expr  \Rightarrow  \ottnt{ret_{{\mathrm{1}}}}}%
\ottpremise{\Phi  \vdash \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret_{{\mathrm{1}}}}  \leadsto  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}_{{\mathrm{1}}}}%
\ottpremise{\mathcal{C}  \ottsym{,}  \mathcal{C}_{{\mathrm{1}}}  \ottsym{;}  \mathcal{L}  \ottsym{,}  \mathcal{L}_{{\mathrm{1}}}  \ottsym{;}  \Phi  \ottsym{,}  \Phi_{{\mathrm{1}}}  \ottsym{;}  \mathcal{R}  \ottsym{,}  \mathcal{R}_{{\mathrm{1}}}  \vdash  texpr  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}'  \ottsym{,}  \mathcal{R}  \vdash  \ottkw{let} \, \ottkw{strong} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  is\_expr \, \ottkw{in} \, texpr  \Leftarrow  \ottnt{ret_{{\mathrm{2}}}}}{%
{\ottdrulename{Ty\_Is\_TE\_LetS}}{}%
}}

\newcommand{\ottdefnTyXXIsXXTE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_texpr  \Leftarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXIsXXTEXXLetS{}}
\end{ottdefnblock}}

%% defn TE
\newcommand{\ottdruleTyXXTEXXIs}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_texpr  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  is\_texpr  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_TE\_Is}}{}%
}}


\newcommand{\ottdruleTyXXTEXXSeq}[1]{\ottdrule[#1]{%
\ottpremise{\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_texpr  \Leftarrow  \ottnt{ret}}%
}{
\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  seq\_texpr  \Leftarrow  \ottnt{ret}}{%
{\ottdrulename{Ty\_TE\_Seq}}{}%
}}

\newcommand{\ottdefnTyXXTE}[1]{\begin{ottdefnblock}[#1]{$\mathcal{C}  \ottsym{;}  \mathcal{L}  \ottsym{;}  \Phi  \ottsym{;}  \mathcal{R}  \vdash  texpr  \Leftarrow  \ottnt{ret}$}{}
\ottusedrule{\ottdruleTyXXTEXXIs{}}
\ottusedrule{\ottdruleTyXXTEXXSeq{}}
\end{ottdefnblock}}


\newcommand{\ottdefnstexprXXjtype}{
\ottdefnTyXXSeqXXTE{}\ottdefnTyXXIsXXTE{}\ottdefnTyXXTE{}}

% defns subs_jtype
%% defn Decons_Value_
\newcommand{\ottdruleSubsXXDeconsXXValueXXNoXXSymXXAnnot}[1]{\ottdrule[#1]{%
}{
\ottmv{\_}  {:}  \_  =  pval  \leadsto  \cdot}{%
{\ottdrulename{Subs\_Decons\_Value\_No\_Sym\_Annot}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValueXXSymXXAnnot}[1]{\ottdrule[#1]{%
}{
\ottmv{x}  {:}  \_  =  pval  \leadsto  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \cdot}{%
{\ottdrulename{Subs\_Decons\_Value\_Sym\_Annot}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValueXXCons}[1]{\ottdrule[#1]{%
\ottpremise{pattern_{{\mathrm{1}}}  =  pval_{{\mathrm{1}}}  \leadsto  \sigma_{{\mathrm{1}}}}%
\ottpremise{pattern_{{\mathrm{2}}}  =  pval_{{\mathrm{2}}}  \leadsto  \sigma_{{\mathrm{2}}}}%
}{
\ottkw{Cons}  \ottsym{(}  pattern_{{\mathrm{1}}}  \ottsym{,}  pattern_{{\mathrm{2}}}  \ottsym{)}  =  \ottkw{Cons}  \ottsym{(}  pval_{{\mathrm{1}}}  \ottsym{,}  pval_{{\mathrm{2}}}  \ottsym{)}  \leadsto  \sigma_{{\mathrm{1}}}  \ottsym{,}  \sigma_{{\mathrm{2}}}}{%
{\ottdrulename{Subs\_Decons\_Value\_Cons}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValueXXTuple}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  =  pval_{\ottmv{i}}  \leadsto  \sigma_{\ottmv{i}}}{\ottmv{i}}}%
}{
\ottkw{Tuple}  \ottsym{(} \, \ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  =  \ottkw{Tuple}  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \leadsto  \ottcomp{\sigma_{\ottmv{i}}}{\ottmv{i}}}{%
{\ottdrulename{Subs\_Decons\_Value\_Tuple}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValueXXArray}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{pattern_{\ottmv{i}}  =  pval_{\ottmv{i}}  \leadsto  \sigma_{\ottmv{i}}}{\ottmv{i}}}%
}{
\ottkw{Array}  \ottsym{(} \, \ottcomp{pattern_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  =  \ottkw{Array}  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \leadsto  \ottcomp{\sigma_{\ottmv{i}}}{\ottmv{i}}}{%
{\ottdrulename{Subs\_Decons\_Value\_Array}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValueXXSpecified}[1]{\ottdrule[#1]{%
\ottpremise{pattern  =  pval  \leadsto  \sigma}%
}{
\ottkw{Specified}  \ottsym{(}  pattern  \ottsym{)}  =  pval  \leadsto  \sigma}{%
{\ottdrulename{Subs\_Decons\_Value\_Specified}}{}%
}}

\newcommand{\ottdefnSubsXXDeconsXXValueXX}[1]{\begin{ottdefnblock}[#1]{$pattern  =  pval  \leadsto  \sigma$}{}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXNoXXSymXXAnnot{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXSymXXAnnot{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXCons{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXTuple{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXArray{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValueXXSpecified{}}
\end{ottdefnblock}}

%% defn Decons_Value'_
\newcommand{\ottdruleSubsXXDeconsXXValuePPXXSym}[1]{\ottdrule[#1]{%
}{
\ottmv{x}  =  pval  \leadsto  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \cdot}{%
{\ottdrulename{Subs\_Decons\_Value'\_Sym}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXValuePPXXPattern}[1]{\ottdrule[#1]{%
\ottpremise{pattern  =  pval  \leadsto  \sigma}%
}{
pattern  =  pval  \leadsto  \sigma}{%
{\ottdrulename{Subs\_Decons\_Value'\_Pattern}}{}%
}}

\newcommand{\ottdefnSubsXXDeconsXXValuePPXX}[1]{\begin{ottdefnblock}[#1]{$ident\_or\_pattern  =  pval  \leadsto  \sigma$}{}
\ottusedrule{\ottdruleSubsXXDeconsXXValuePPXXSym{}}
\ottusedrule{\ottdruleSubsXXDeconsXXValuePPXXPattern{}}
\end{ottdefnblock}}

%% defn Decons_Res
\newcommand{\ottdruleSubsXXDeconsXXResXXEmp}[1]{\ottdrule[#1]{%
}{
\ottkw{emp}  =  \ottkw{emp}  \leadsto  \cdot}{%
{\ottdrulename{Subs\_Decons\_Res\_Emp}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXResXXVar}[1]{\ottdrule[#1]{%
}{
ident  =  \ottnt{res\_term}  \leadsto  \ottnt{res\_term}  \ottsym{/}  ident  \ottsym{,}  \cdot}{%
{\ottdrulename{Subs\_Decons\_Res\_Var}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXResXXPair}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{res\_pattern_{{\mathrm{1}}}}  =  \ottnt{res\_term_{{\mathrm{1}}}}  \leadsto  \sigma_{{\mathrm{1}}}}%
\ottpremise{\ottnt{res\_pattern_{{\mathrm{2}}}}  =  \ottnt{res\_term_{{\mathrm{2}}}}  \leadsto  \sigma_{{\mathrm{2}}}}%
}{
\langle  \ottnt{res\_pattern_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_pattern_{{\mathrm{2}}}}  \rangle  =  \langle  \ottnt{res\_term_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{res\_term_{{\mathrm{2}}}}  \rangle  \leadsto  \sigma_{{\mathrm{1}}}  \ottsym{,}  \sigma_{{\mathrm{2}}}}{%
{\ottdrulename{Subs\_Decons\_Res\_Pair}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXResXXPack}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{res\_pattern}  =  \ottnt{res\_term}  \leadsto  \sigma}%
}{
\ottkw{pack} \, \ottsym{(}  ident  \ottsym{,}  \ottnt{res\_pattern}  \ottsym{)}  =  \ottkw{pack} \, \ottsym{(}  pval  \ottsym{,}  \ottnt{res\_term}  \ottsym{)}  \leadsto  pval  \ottsym{/}  ident  \ottsym{,}  \sigma}{%
{\ottdrulename{Subs\_Decons\_Res\_Pack}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXResXXFold}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{res\_pattern}  =  \ottnt{res\_term}  \leadsto  \sigma}%
}{
\ottkw{fold} \, \ottsym{(}  \ottnt{res\_pattern}  \ottsym{)}  =  \ottnt{res\_term}  \leadsto  \sigma}{%
{\ottdrulename{Subs\_Decons\_Res\_Fold}}{}%
}}

\newcommand{\ottdefnSubsXXDeconsXXRes}[1]{\begin{ottdefnblock}[#1]{$\ottnt{res\_pattern}  =  \ottnt{res\_term}  \leadsto  \sigma$}{}
\ottusedrule{\ottdruleSubsXXDeconsXXResXXEmp{}}
\ottusedrule{\ottdruleSubsXXDeconsXXResXXVar{}}
\ottusedrule{\ottdruleSubsXXDeconsXXResXXPair{}}
\ottusedrule{\ottdruleSubsXXDeconsXXResXXPack{}}
\ottusedrule{\ottdruleSubsXXDeconsXXResXXFold{}}
\end{ottdefnblock}}

%% defn Decons_Ret
\newcommand{\ottdruleSubsXXDeconsXXRetXXEmpty}[1]{\ottdrule[#1]{%
}{
\,  \leadsto  \cdot}{%
{\ottdrulename{Subs\_Decons\_Ret\_Empty}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXRetXXComp}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  =  pval  \leadsto  \sigma}%
\ottpremise{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \psi}%
}{
\ottkw{comp} \, ident\_or\_pattern  =  pval  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma  \ottsym{,}  \psi}{%
{\ottdrulename{Subs\_Decons\_Ret\_Comp}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXRetXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \psi}%
}{
\ottkw{log} \, ident  =  pval  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  pval  \ottsym{/}  ident  \ottsym{,}  \psi}{%
{\ottdrulename{Subs\_Decons\_Ret\_Log}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXRetXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{res\_pattern}  =  \ottnt{res\_term}  \leadsto  \sigma}%
\ottpremise{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \psi}%
}{
\texttt{res} \, \ottnt{res\_pattern}  =  \ottnt{res\_term}  \ottsym{,} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma  \ottsym{,}  \psi}{%
{\ottdrulename{Subs\_Decons\_Ret\_Res}}{}%
}}

\newcommand{\ottdefnSubsXXDeconsXXRet}[1]{\begin{ottdefnblock}[#1]{$\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma$}{}
\ottusedrule{\ottdruleSubsXXDeconsXXRetXXEmpty{}}
\ottusedrule{\ottdruleSubsXXDeconsXXRetXXComp{}}
\ottusedrule{\ottdruleSubsXXDeconsXXRetXXLog{}}
\ottusedrule{\ottdruleSubsXXDeconsXXRetXXRes{}}
\end{ottdefnblock}}

%% defn Decons_Arg
\newcommand{\ottdruleSubsXXDeconsXXArgXXEmpty}[1]{\ottdrule[#1]{%
}{
\,  \mathbin{ {:} {:} }  \ottnt{ret}  \gg  \cdot  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Subs\_Decons\_Arg\_Empty}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXArgXXComp}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\ottmv{x}  =  pval  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \Pi \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \gg  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Subs\_Decons\_Arg\_Comp}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXArgXXLog}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\ottmv{x}  =  pval  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \forall \, \ottmv{x}  {:}  \beta  . \:  \ottnt{arg}  \gg  pval  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Subs\_Decons\_Arg\_Log}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXArgXXRes}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\ottmv{x}  =  \ottnt{res\_term}  \ottsym{,} \, \ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{res}  \multimap  \ottnt{arg}  \gg  \ottnt{res\_term}  \ottsym{/}  \ottmv{x}  \ottsym{,}  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Subs\_Decons\_Arg\_Res}}{}%
}}


\newcommand{\ottdruleSubsXXDeconsXXArgXXPhi}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  term  \supset  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}{%
{\ottdrulename{Subs\_Decons\_Arg\_Phi}}{}%
}}

\newcommand{\ottdefnSubsXXDeconsXXArg}[1]{\begin{ottdefnblock}[#1]{$\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}$}{}
\ottusedrule{\ottdruleSubsXXDeconsXXArgXXEmpty{}}
\ottusedrule{\ottdruleSubsXXDeconsXXArgXXComp{}}
\ottusedrule{\ottdruleSubsXXDeconsXXArgXXLog{}}
\ottusedrule{\ottdruleSubsXXDeconsXXArgXXRes{}}
\ottusedrule{\ottdruleSubsXXDeconsXXArgXXPhi{}}
\end{ottdefnblock}}


\newcommand{\ottdefnssubsXXjtype}{
\ottdefnSubsXXDeconsXXValueXX{}\ottdefnSubsXXDeconsXXValuePPXX{}\ottdefnSubsXXDeconsXXRes{}\ottdefnSubsXXDeconsXXRet{}\ottdefnSubsXXDeconsXXArg{}}

% defns pure_opsem_jtype
%% defn PE_PE
\newcommand{\ottdruleOpXXPEXXPEXXArrayShift}[1]{\ottdrule[#1]{%
\ottpremise{mem\_ptr' \, \equiv \, mem\_ptr  \mathbin{ {+}_{ \mathrm{ptr} } }   mem\_int   \times   \mathrm{size\_of}(  \tau  ) }%
}{
\langle  \ottkw{array\_shift} \, \ottsym{(}  mem\_ptr  \ottsym{,}  \tau  \ottsym{,}  mem\_int  \ottsym{)}  \rangle  \longrightarrow  \langle  mem\_ptr'  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_ArrayShift}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXMemberShift}[1]{\ottdrule[#1]{%
\ottpremise{mem\_ptr' \, \equiv \, mem\_ptr  \mathbin{ {+}_{ \mathrm{ptr} } }   \mathrm{offset\_of}_{  tag  }(  member  ) }%
}{
\langle  \ottkw{member\_shift} \, \ottsym{(}  mem\_ptr  \ottsym{,}  tag  \ottsym{,}  member  \ottsym{)}  \rangle  \longrightarrow  \langle  mem\_ptr'  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_MemberShift}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXNotXXTrue}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{not} \, \ottsym{(}  \ottkw{True}  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottkw{False}  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Not\_True}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXNotXXFalse}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{not} \, \ottsym{(}  \ottkw{False}  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottkw{True}  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Not\_False}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXArithXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{ mem\_int  \, \equiv \,   mem\_int_{{\mathrm{1}}}    \mathbin{ binop_{arith} }    mem\_int_{{\mathrm{2}}}  }%
}{
\langle  mem\_int_{{\mathrm{1}}} \, \mathbin{ binop_{arith} } \, mem\_int_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  mem\_int  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Arith\_Binop}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXRelXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{ bool\_value  \, \equiv \,   mem\_int_{{\mathrm{1}}}    \mathbin{ binop_{rel} }    mem\_int_{{\mathrm{2}}}  }%
}{
\langle  mem\_int_{{\mathrm{1}}} \, \mathbin{ binop_{rel} } \, mem\_int_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  bool\_value  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Rel\_Binop}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXBoolXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{ bool\_value  \, \equiv \,   bool\_value_{{\mathrm{1}}}    \mathbin{ binop_{bool} }    bool\_value_{{\mathrm{2}}}  }%
}{
\langle  bool\_value_{{\mathrm{1}}} \, \mathbin{ binop_{bool} } \, bool\_value_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  bool\_value  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Bool\_Binop}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXAssertXXUndef}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{assert\_undef} \, \ottsym{(}  \ottkw{True}  \ottsym{,}   \, \ottmv{UB\_name}  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottkw{Unit}  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Assert\_Undef}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXBoolXXToXXIntegerXXTrue}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{bool\_to\_integer} \, \ottsym{(}  \ottkw{True}  \ottsym{)}  \rangle  \longrightarrow  \langle   1   \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Bool\_To\_Integer\_True}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXBoolXXToXXIntegerXXFalse}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{bool\_to\_integer} \, \ottsym{(}  \ottkw{False}  \ottsym{)}  \rangle  \longrightarrow  \langle   0   \rangle}{%
{\ottdrulename{Op\_PE\_PE\_Bool\_To\_Integer\_False}}{}%
}}


\newcommand{\ottdruleOpXXPEXXPEXXWrapI}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{abbrev_{{\mathrm{1}}}} \, \equiv \,  \mathrm{max\_int}_{  \tau  }   \ottsym{-}   \mathrm{min\_int}_{  \tau  }   \ottsym{+}   1 }%
\ottpremise{\ottmv{abbrev_{{\mathrm{2}}}} \, \equiv \,  pval  \, \ottkw{rem\_f} \, \ottmv{abbrev_{{\mathrm{1}}}}}%
\ottpremise{ mem\_int'  \, \equiv \, \ottkw{if} \, \ottmv{abbrev_{{\mathrm{2}}}}  \leq   \mathrm{max\_int}_{  \tau  }  \, \ottkw{then} \, \ottmv{abbrev_{{\mathrm{2}}}} \, \ottkw{else} \, \ottmv{abbrev_{{\mathrm{2}}}}  \ottsym{-}  \ottmv{abbrev_{{\mathrm{1}}}}}%
}{
\langle  \ottkw{wrapI} \, \ottsym{(}  \tau  \ottsym{,}  mem\_int  \ottsym{)}  \rangle  \longrightarrow  \langle  mem\_int'  \rangle}{%
{\ottdrulename{Op\_PE\_PE\_WrapI}}{}%
}}

\newcommand{\ottdefnOpXXPEXXPE}[1]{\begin{ottdefnblock}[#1]{$\langle  pexpr  \rangle  \longrightarrow  \langle  pexpr'  \rangle$}{}
\ottusedrule{\ottdruleOpXXPEXXPEXXArrayShift{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXMemberShift{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXNotXXTrue{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXNotXXFalse{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXArithXXBinop{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXRelXXBinop{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXBoolXXBinop{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXAssertXXUndef{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXBoolXXToXXIntegerXXTrue{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXBoolXXToXXIntegerXXFalse{}}
\ottusedrule{\ottdruleOpXXPEXXPEXXWrapI{}}
\end{ottdefnblock}}

%% defn PE_TPE
\newcommand{\ottdruleOpXXPEXXTPEXXCall}[1]{\ottdrule[#1]{%
\ottpremise{name  {:}  \ottnt{pure\_arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  tpexpr \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{pure\_arg}  \gg  \sigma  \ottsym{;}  \Sigma \, \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \wedge  \ottkw{I}}%
}{
\langle  name  \ottsym{(} \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}} \, \ottsym{)}  \rangle  \longrightarrow  \langle   \sigma  (  tpexpr  )   {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:   \sigma  (  \ottnt{term}  )   \ottsym{)}  \rangle}{%
{\ottdrulename{Op\_PE\_TPE\_Call}}{}%
}}

\newcommand{\ottdefnOpXXPEXXTPE}[1]{\begin{ottdefnblock}[#1]{$\langle  pexpr  \rangle  \longrightarrow  \langle  tpexpr  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  term  \ottsym{)}  \rangle$}{}
\ottusedrule{\ottdruleOpXXPEXXTPEXXCall{}}
\end{ottdefnblock}}

%% defn TPE_TPE
\newcommand{\ottdruleOpXXTPEXXTPEXXCase}[1]{\ottdrule[#1]{%
\ottpremise{pattern_{\ottmv{j}}  =  pval  \leadsto  \sigma_{\ottmv{j}}}%
\ottpremise{\forall \, \ottmv{i}  \ottsym{<}  \ottmv{j}  . \: \, \ottkw{not} \, \ottsym{(}  pattern_{\ottmv{i}}  =  pval  \leadsto  \sigma_{\ottmv{i}}  \ottsym{)}}%
}{
\langle  \ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  pattern_{\ottmv{i}}  \Rightarrow  tpexpr_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}  \rangle  \longrightarrow  \langle   \sigma_{\ottmv{j}}  (  tpexpr_{\ottmv{j}}  )   \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_Case}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXLetXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  =  pval  \leadsto  \sigma}%
}{
\langle  \ottkw{let} \, ident\_or\_pattern  =  pval \, \ottkw{in} \, tpexpr  \rangle  \longrightarrow  \langle   \sigma  (  tpexpr  )   \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_Let\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXLetXXLet}[1]{\ottdrule[#1]{%
\ottpremise{\langle  pexpr  \rangle  \longrightarrow  \langle  pexpr'  \rangle}%
}{
\langle  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, tpexpr  \rangle  \longrightarrow  \langle  \ottkw{let} \, ident\_or\_pattern  =  pexpr' \, \ottkw{in} \, tpexpr  \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_Let\_Let}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXLetXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\langle  pexpr  \rangle  \longrightarrow  \langle  tpexpr_{{\mathrm{1}}}  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  \rangle}%
}{
\langle  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr_{{\mathrm{1}}} \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_Let\_LetT}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXLetTXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  =  pval  \leadsto  \sigma}%
}{
\langle  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  \ottkw{done} \, pval \, \ottkw{in} \, tpexpr  \rangle  \longrightarrow  \langle   \sigma  (  tpexpr  )   \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_LetT\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXLetTXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\langle  tpexpr_{{\mathrm{1}}}  \rangle  \longrightarrow  \langle  tpexpr'_{{\mathrm{1}}}  \rangle}%
}{
\langle  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr_{{\mathrm{1}}} \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr'_{{\mathrm{1}}} \, \ottkw{in} \, tpexpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_LetT\_LetT}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXIfXXTrue}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{if} \, \ottkw{True} \, \ottkw{then} \, tpexpr_{{\mathrm{1}}} \, \ottkw{else} \, tpexpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  tpexpr_{{\mathrm{1}}}  \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_If\_True}}{}%
}}


\newcommand{\ottdruleOpXXTPEXXTPEXXIfXXFalse}[1]{\ottdrule[#1]{%
}{
\langle  \ottkw{if} \, \ottkw{False} \, \ottkw{then} \, tpexpr_{{\mathrm{1}}} \, \ottkw{else} \, tpexpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  tpexpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_TPE\_TPE\_If\_False}}{}%
}}

\newcommand{\ottdefnOpXXTPEXXTPE}[1]{\begin{ottdefnblock}[#1]{$\langle  tpexpr  \rangle  \longrightarrow  \langle  tpexpr'  \rangle$}{}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXCase{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXLetXXSub{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXLetXXLet{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXLetXXLetT{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXLetTXXSub{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXLetTXXLetT{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXIfXXTrue{}}
\ottusedrule{\ottdruleOpXXTPEXXTPEXXIfXXFalse{}}
\end{ottdefnblock}}


\newcommand{\ottdefnspureXXopsemXXjtype}{
\ottdefnOpXXPEXXPE{}\ottdefnOpXXPEXXTPE{}\ottdefnOpXXTPEXXTPE{}}

% defns opsem_jtype
%% defn SE_TE
\newcommand{\ottdruleOpXXSEXXTEXXCCall}[1]{\ottdrule[#1]{%
\ottpremise{ident  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{ccall} \, \ottsym{(}  \tau  \ottsym{,}  ident  \ottsym{,}  \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   {:}   \sigma  (  \ottnt{ret}  )   \rangle}{%
{\ottdrulename{Op\_SE\_TE\_CCall}}{}%
}}


\newcommand{\ottdruleOpXXSEXXTEXXPCall}[1]{\ottdrule[#1]{%
\ottpremise{name  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottnt{ret}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{pcall} \, \ottsym{(}  name  \ottsym{,}  \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}}  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   {:}   \sigma  (  \ottnt{ret}  )   \rangle}{%
{\ottdrulename{Op\_SE\_TE\_PCall}}{}%
}}

\newcommand{\ottdefnOpXXSEXXTE}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  seq\_expr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  {:}  \ottnt{ret}  \rangle$}{}
\ottusedrule{\ottdruleOpXXSEXXTEXXCCall{}}
\ottusedrule{\ottdruleOpXXSEXXTEXXPCall{}}
\end{ottdefnblock}}

%% defn STE_TE
\newcommand{\ottdruleOpXXSTEXXTEXXRun}[1]{\ottdrule[#1]{%
\ottpremise{ident  {:}  \ottnt{arg} \, \equiv \, \ottcomp{\ottmv{x_{\ottmv{i}}}}{\ottmv{i}} \, \mapsto  texpr \, \in \, \ottkw{Globals}}%
\ottpremise{\ottcomp{\ottmv{x_{\ottmv{i}}}  =  pval_{\ottmv{i}}}{\ottmv{i}} \, \mathbin{ {:} {:} }  \ottnt{arg}  \gg  \sigma  \ottsym{;}  \ottkw{false}  \wedge  \ottkw{I}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{run} \, ident \, \ottcomp{pval_{\ottmv{i}}}{\ottmv{i}}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   \rangle}{%
{\ottdrulename{Op\_STE\_TE\_Run}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXCase}[1]{\ottdrule[#1]{%
\ottpremise{pattern_{\ottmv{j}}  =  pval  \leadsto  \sigma_{\ottmv{j}}}%
\ottpremise{\forall \, \ottmv{i}  \ottsym{<}  \ottmv{j}  . \: \, \ottkw{not} \, \ottsym{(}  pattern_{\ottmv{i}}  =  pval  \leadsto  \sigma_{\ottmv{i}}  \ottsym{)}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{case} \, pval \, \ottkw{of} \, \ottcomp{\mid  pattern_{\ottmv{i}}  \Rightarrow  texpr_{\ottmv{i}}}{\ottmv{i}} \, \ottkw{end}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma_{\ottmv{j}}  (  texpr_{\ottmv{j}}  )   \rangle}{%
{\ottdrulename{Op\_STE\_TE\_Case}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetPXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  =  pval  \leadsto  \sigma}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  =  pval \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetP\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetPXXLetP}[1]{\ottdrule[#1]{%
\ottpremise{\langle  pexpr  \rangle  \longrightarrow  \langle  pexpr'  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  =  pexpr' \, \ottkw{in} \, texpr  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetP\_LetP}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetPXXLetTP}[1]{\ottdrule[#1]{%
\ottpremise{\langle  pexpr  \rangle  \longrightarrow  \langle  tpexpr  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  =  pexpr \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr \, \ottkw{in} \, texpr  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetP\_LetTP}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetTPXXSub}[1]{\ottdrule[#1]{%
\ottpremise{ident\_or\_pattern  =  pval  \leadsto  \sigma}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  \ottkw{done} \, pval \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetTP\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetTPXXLetTP}[1]{\ottdrule[#1]{%
\ottpremise{\langle  tpexpr  \rangle  \longrightarrow  \langle  tpexpr'  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, ident\_or\_pattern  {:}  \ottsym{(}  \ottmv{y}  {:}  \beta  . \:  \ottnt{term}  \ottsym{)}  =  tpexpr' \, \ottkw{in} \, texpr  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetTP\_LetTP}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetTXXSub}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  =  \ottkw{done} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetT\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  seq\_expr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  texpr_{{\mathrm{1}}}  {:}  \ottnt{ret}  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  seq\_expr \, \ottkw{in} \, texpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  =  texpr_{{\mathrm{1}}} \, \ottkw{in} \, texpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_Let\_LetT}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXLetTXXLetT}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  texpr_{{\mathrm{1}}}  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr'_{{\mathrm{1}}}  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  =  texpr_{{\mathrm{1}}} \, \ottkw{in} \, texpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  \ottkw{let} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, {:}  \ottnt{ret}  =  texpr'_{{\mathrm{1}}} \, \ottkw{in} \, texpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_LetT\_LetT}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXIfXXTrue}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{if} \, \ottkw{True} \, \ottkw{then} \, texpr_{{\mathrm{1}}} \, \ottkw{else} \, texpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  texpr_{{\mathrm{1}}}  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_If\_True}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXIfXXFalse}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{if} \, \ottkw{False} \, \ottkw{then} \, texpr_{{\mathrm{1}}} \, \ottkw{else} \, texpr_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  texpr_{{\mathrm{2}}}  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_If\_False}}{}%
}}


\newcommand{\ottdruleOpXXSTEXXTEXXBound}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{bound} \, \ottsym{[}  int  \ottsym{]}  \ottsym{(}  is\_texpr  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  is\_texpr  \rangle}{%
{\ottdrulename{Op\_STE\_TE\_Bound}}{}%
}}

\newcommand{\ottdefnOpXXSTEXXTE}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  seq\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle$}{}
\ottusedrule{\ottdruleOpXXSTEXXTEXXRun{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXCase{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetPXXSub{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetPXXLetP{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetPXXLetTP{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetTPXXSub{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetTPXXLetTP{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetTXXSub{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetXXLetT{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXLetTXXLetT{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXIfXXTrue{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXIfXXFalse{}}
\ottusedrule{\ottdruleOpXXSTEXXTEXXBound{}}
\end{ottdefnblock}}

%% defn Memop_Tval
\newcommand{\ottdruleOpXXMemopXXTValXXRelXXBinop}[1]{\ottdrule[#1]{%
\ottpremise{ bool\_value  \, \equiv \,   mem\_int_{{\mathrm{1}}}    \mathbin{ binop_{rel} }    mem\_int_{{\mathrm{2}}}  }%
}{
\langle  \ottnt{h}  \ottsym{;}  mem\_int_{{\mathrm{1}}} \, \mathbin{ binop_{rel} } \, mem\_int_{{\mathrm{2}}}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, bool\_value  \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_Rel\_Binop}}{}%
}}


\newcommand{\ottdruleOpXXMemopXXTValXXIntFromPtr}[1]{\ottdrule[#1]{%
\ottpremise{ mem\_int  \, \equiv \, \ottkw{cast\_ptr\_to\_int} \,  mem\_ptr }%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{intFromPtr} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  mem\_ptr  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, mem\_int  \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_IntFromPtr}}{}%
}}


\newcommand{\ottdruleOpXXMemopXXTValXXPtrFromInt}[1]{\ottdrule[#1]{%
\ottpremise{ mem\_ptr  \, \equiv \, \ottkw{cast\_ptr\_to\_int} \,  mem\_int }%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{ptrFromInt} \, \ottsym{(}  \tau_{{\mathrm{1}}}  \ottsym{,}  \tau_{{\mathrm{2}}}  \ottsym{,}  mem\_int  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, mem\_ptr  \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_PtrFromInt}}{}%
}}


\newcommand{\ottdruleOpXXMemopXXTValXXPtrValidForDeref}[1]{\ottdrule[#1]{%
\ottpremise{ bool\_value  \, \equiv \, \ottkw{aligned} \, \ottsym{(}  \tau  \ottsym{,}   mem\_ptr   \ottsym{)}}%
}{
\langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{\}}  \ottsym{;}  \ottkw{ptrValidForDeref} \, \ottsym{(}  \tau  \ottsym{,}  mem\_ptr  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{\}}  \ottsym{;}  \ottkw{done} \, bool\_value  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_PtrValidForDeref}}{}%
}}


\newcommand{\ottdruleOpXXMemopXXTValXXPtrWellAligned}[1]{\ottdrule[#1]{%
\ottpremise{ bool\_value  \, \equiv \, \ottkw{aligned} \, \ottsym{(}  \tau  \ottsym{,}   mem\_ptr   \ottsym{)}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{ptrWellAligned} \, \ottsym{(}  \tau  \ottsym{,}  mem\_ptr  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, bool\_value  \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_PtrWellAligned}}{}%
}}


\newcommand{\ottdruleOpXXMemopXXTValXXPtrArrayShift}[1]{\ottdrule[#1]{%
\ottpremise{ mem\_ptr'  \, \equiv \,  mem\_ptr   \mathbin{ {+}_{ \mathrm{ptr} } }  \ottsym{(}   mem\_int   \times   \mathrm{size\_of}(  \tau  )   \ottsym{)}}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{ptrArrayShift} \, \ottsym{(}  mem\_ptr  \ottsym{,}  \tau  \ottsym{,}  mem\_int  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, mem\_ptr'  \rangle}{%
{\ottdrulename{Op\_Memop\_TVal\_PtrArrayShift}}{}%
}}

\newcommand{\ottdefnOpXXMemopXXTval}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  mem\_op  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle$}{}
\ottusedrule{\ottdruleOpXXMemopXXTValXXRelXXBinop{}}
\ottusedrule{\ottdruleOpXXMemopXXTValXXIntFromPtr{}}
\ottusedrule{\ottdruleOpXXMemopXXTValXXPtrFromInt{}}
\ottusedrule{\ottdruleOpXXMemopXXTValXXPtrValidForDeref{}}
\ottusedrule{\ottdruleOpXXMemopXXTValXXPtrWellAligned{}}
\ottusedrule{\ottdruleOpXXMemopXXTValXXPtrArrayShift{}}
\end{ottdefnblock}}

%% defn Action_Tval
\newcommand{\ottdruleOpXXActionXXTvalXXCreate}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{fresh} \, \ottsym{(}  mem\_ptr  \ottsym{)}}%
\ottpremise{\ottkw{representable} \, \ottsym{(}  \tau  *  \ottsym{,}   mem\_ptr   \ottsym{)}}%
\ottpremise{\ottkw{alignedI} \, \ottsym{(}   mem\_int   \ottsym{,}   mem\_ptr   \ottsym{)}}%
\ottpremise{pval  {:}   \beta_{  \tau  } }%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{create} \, \ottsym{(}  mem\_int  \ottsym{,}  \tau  \ottsym{)}    \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{   {  \times  }   }{ \mapsto } }_{  \tau  } }   pval    \ottsym{\}}  \ottsym{;}  \ottkw{done} \, mem\_ptr  \ottsym{,}  pval  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{   {  \times  }   }{ \mapsto } }_{  \tau  } }   pval    \rangle}{%
{\ottdrulename{Op\_Action\_Tval\_Create}}{}%
}}


\newcommand{\ottdruleOpXXActionXXTvalXXLoad}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \ottsym{\}}  \ottsym{;}  \ottkw{load} \, \ottsym{(}  \tau  \ottsym{,}  mem\_ptr  \ottsym{,}  \_  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \ottsym{\}}  \ottsym{;}  \ottkw{done} \, pval  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \rangle}{%
{\ottdrulename{Op\_Action\_Tval\_Load}}{}%
}}


\newcommand{\ottdruleOpXXActionXXTvalXXStore}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{\}}  \ottsym{;}  \ottkw{store} \, \ottsym{(}  \_  \ottsym{,}  \tau  \ottsym{,}  mem\_ptr  \ottsym{,}  pval  \ottsym{,}  \_  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \ottsym{\}}  \ottsym{;}  \ottkw{done} \, \ottkw{Unit}  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{  \checkmark  }{ \mapsto } }_{  \tau  } }   pval    \rangle}{%
{\ottdrulename{Op\_Action\_Tval\_Store}}{}%
}}


\newcommand{\ottdruleOpXXActionXXTvalXXKillXXStatic}[1]{\ottdrule[#1]{%
}{
\langle  \ottnt{h}  \ottsym{+}  \ottsym{\{}    mem\_ptr   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \ottsym{\}}  \ottsym{;}  \ottkw{kill} \, \ottsym{(}  \ottkw{static} \, \tau  \ottsym{,}  mem\_ptr  \ottsym{,}    mem\_ptr   \mathbin{ { \overset{    }{ \mapsto } }_{  \tau  } }  \_   \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  \ottkw{done} \, \ottkw{Unit}  \rangle}{%
{\ottdrulename{Op\_Action\_Tval\_Kill\_Static}}{}%
}}

\newcommand{\ottdefnOpXXActionXXTval}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle$}{}
\ottusedrule{\ottdruleOpXXActionXXTvalXXCreate{}}
\ottusedrule{\ottdruleOpXXActionXXTvalXXLoad{}}
\ottusedrule{\ottdruleOpXXActionXXTvalXXStore{}}
\ottusedrule{\ottdruleOpXXActionXXTvalXXKillXXStatic{}}
\end{ottdefnblock}}

%% defn IsE_IsE
\newcommand{\ottdruleOpXXIsEXXIsEXXMemop}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  mem\_op  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  tval  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{memop} \, \ottsym{(}  mem\_op  \ottsym{)}  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  tval  \rangle}{%
{\ottdrulename{Op\_IsE\_IsE\_Memop}}{}%
}}


\newcommand{\ottdruleOpXXIsEXXIsEXXAction}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}     \, mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}{%
{\ottdrulename{Op\_IsE\_IsE\_Action}}{}%
}}


\newcommand{\ottdruleOpXXIsEXXIsEXXNegXXAction}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}   \texttt{neg}  \, mem\_action  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  tval  \rangle}{%
{\ottdrulename{Op\_IsE\_IsE\_Neg\_Action}}{}%
}}

\newcommand{\ottdefnOpXXIsEXXIsE}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  is\_expr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  is\_expr'  \rangle$}{}
\ottusedrule{\ottdruleOpXXIsEXXIsEXXMemop{}}
\ottusedrule{\ottdruleOpXXIsEXXIsEXXAction{}}
\ottusedrule{\ottdruleOpXXIsEXXIsEXXNegXXAction{}}
\end{ottdefnblock}}

%% defn IsTE_TE
\newcommand{\ottdruleOpXXIsTEXXIsTEXXLetSXXSub}[1]{\ottdrule[#1]{%
\ottpremise{\ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}  =  \ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \leadsto  \sigma}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottkw{strong} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  \ottkw{done} \, \ottcomp{\ottnt{spine\_elem_{\ottmv{i}}}}{\ottmv{i}} \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}   \sigma  (  texpr  )   \rangle}{%
{\ottdrulename{Op\_IsTE\_IsTE\_LetS\_Sub}}{}%
}}


\newcommand{\ottdruleOpXXIsTEXXIsTEXXLetSXXLetS}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  is\_expr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  is\_expr'  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  \ottkw{let} \, \ottkw{strong} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  is\_expr \, \ottkw{in} \, texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  \ottkw{let} \, \ottkw{strong} \, \ottcomp{\ottnt{ret\_pattern_{\ottmv{i}}}}{\ottmv{i}} \, =  is\_expr' \, \ottkw{in} \, texpr  \rangle}{%
{\ottdrulename{Op\_IsTE\_IsTE\_LetS\_LetS}}{}%
}}

\newcommand{\ottdefnOpXXIsTEXXTE}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  is\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle$}{}
\ottusedrule{\ottdruleOpXXIsTEXXIsTEXXLetSXXSub{}}
\ottusedrule{\ottdruleOpXXIsTEXXIsTEXXLetSXXLetS{}}
\end{ottdefnblock}}

%% defn TE_TE
\newcommand{\ottdruleOpXXTEXXTEXXSeq}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  seq\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  texpr  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  seq\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h}  \ottsym{;}  texpr  \rangle}{%
{\ottdrulename{Op\_TE\_TE\_Seq}}{}%
}}


\newcommand{\ottdruleOpXXTEXXTEXXIs}[1]{\ottdrule[#1]{%
\ottpremise{\langle  \ottnt{h}  \ottsym{;}  is\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle}%
}{
\langle  \ottnt{h}  \ottsym{;}  is\_texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr  \rangle}{%
{\ottdrulename{Op\_TE\_TE\_Is}}{}%
}}

\newcommand{\ottdefnOpXXTEXXTE}[1]{\begin{ottdefnblock}[#1]{$\langle  \ottnt{h}  \ottsym{;}  texpr  \rangle  \longrightarrow  \langle  \ottnt{h'}  \ottsym{;}  texpr'  \rangle$}{}
\ottusedrule{\ottdruleOpXXTEXXTEXXSeq{}}
\ottusedrule{\ottdruleOpXXTEXXTEXXIs{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsopsemXXjtype}{
\ottdefnOpXXSEXXTE{}\ottdefnOpXXSTEXXTE{}\ottdefnOpXXMemopXXTval{}\ottdefnOpXXActionXXTval{}\ottdefnOpXXIsEXXIsE{}\ottdefnOpXXIsTEXXTE{}\ottdefnOpXXTEXXTE{}}

\newcommand{\ottdefnss}{
\ottdefnslemmaXXjtype
\ottdefnsresXXjtype
\ottdefnsobjectXXvalueXXjtype
\ottdefnspvalXXjtype
\ottdefnsspineXXjtype
\ottdefnspexprXXjtype
\ottdefnscompXXpatternXXjtype
\ottdefnsresXXpatternXXjtype
\ottdefnsretXXpatternXXjtype
\ottdefnstpvalXXjtype
\ottdefnstpexprXXjtype
\ottdefnsactionXXjtype
\ottdefnsmemopXXjtype
\ottdefnstvalXXjtype
\ottdefnsseqXXexprXXjtype
\ottdefnsisXXexprXXjtype
\ottdefnstexprXXjtype
\ottdefnssubsXXjtype
\ottdefnspureXXopsemXXjtype
\ottdefnsopsemXXjtype
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        213 good    0 bad
Definition rule clauses: 476 good    0 bad
\end{verbatim}
\end{document}
